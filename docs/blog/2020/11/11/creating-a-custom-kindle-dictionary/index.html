
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="iem7"><![endif]-->
<!--[if lt IE 9]><html class="lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Creating a custom Kindle dictionary - Jake McCrary</title>
    <meta name="author" content="Jake McCrary">

    
    
    
    

    <meta itemprop="name" content="Creating a custom Kindle dictionary" />
    <meta itemprop="description" content="Here are the steps to make a custom Kindle dictionary." />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jakemcc" />
    <meta name="twitter:title" content="Creating a custom Kindle dictionary" />
    <meta name="twitter:description" content="Here are the steps to make a custom Kindle dictionary." />
    <meta name="twitter:creator" content="@jakemcc" />
    <meta name="twitter:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />

    <!-- Open Graph data -->
    <meta property="og:site_name" content="Writing by Jake McCrary" />
    <meta property="og:url" content="https://jakemccrary.com/blog/2020/11/11/creating-a-custom-kindle-dictionary/" />
    <meta property="og:title" content="Creating a custom Kindle dictionary" />
    <meta property="og:description" content="Here are the steps to make a custom Kindle dictionary." />
    <meta property="og:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />
    
      <meta property="og:type" content="article" />
    
    
      <meta property="article:published_time" content="2020-11-11T19:23:00-06:00" />
    

    <meta name="description" content="Here are the steps to make a custom Kindle dictionary.">

    <meta name="keywords" content="kindle, dictionary">

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://jakemccrary.com/blog/2020/11/11/creating-a-custom-kindle-dictionary/">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="alternate" title="Jake McCrary" type="application/atom+xml">
    <link href="https://jakemccrary.com/feed.json" rel="alternate" title="Jake McCrary" type="application/json">

    <!-- iOS scaling bug fix Rewritten version By @mathias, @cheeaun and @jdalton Source url: https://gist.github.com/901295 -->
    <script type="text/javascript">
     (function(doc) {
       var addEvent = 'addEventListener',
           type = 'gesturestart',
           qsa = 'querySelectorAll',
           scales = [1, 1],
           meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];
       function fix() {
         meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
         doc.removeEventListener(type, fix, true);
       }
       if ((meta = meta[meta.length - 1]) && addEvent in doc) {
         fix();
         scales = [0.25, 1.6];
         doc[addEvent](type, fix, true);
       }
     }(document));
    </script>
    
<script>
 var origin = window.location.origin;
 if (!origin) {
   origin = window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');
 }
 if (origin.indexOf('localhost') === -1) {
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-19834208-2', 'auto');
   ga('send', 'pageview');
 }
</script>


  </head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Jake McCrary</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul role=main-navigation>
  <li><a href="/">Articles</a></li>
  <li><a href="/adventures/">Adventures</a></li>
  <li><a href="/about.html">About</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
  <li><a href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  <li><a href="https://jakemccrary.substack.com/welcome" target="_blank" rel="subscribe-email" title="subscribe via email">Newsletter</a></li>
</ul>

  <form action="https://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="sitesearch" value="jakemccrary.com">
      <input class="search" type="text" name="q" placeholder="Search"/>
    </fieldset>
  </form>

</nav>
  <div id="main">
    <div id="content">
      <div>
  <article class="hentry" role="article">
    
  <header>
    
      <h1 class="entry-title">Creating a custom Kindle dictionary</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2020-11-11T19:23:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2020</span></span> <span class='time'>7:23 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>Back in April 2013, I created and published a <a href="https://gumroad.com/l/dune-dictionary">custom Kindle dictionary</a> for the book <a href="http://www.amazon.com/gp/product/B00B7NPRY8/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00B7NPRY8&amp;linkCode=as2&amp;tag=jakemccrary08-20&amp;linkId=LC2NFEXWA7JXW57B">Dune</a>.
As far as I can tell, <a href="https://gumroad.com/l/dune-dictionary">my Dune dictionary</a> was the very first custom Kindle dictionary for a fiction book.</p>

<p>I created it because I was reading Dune for the first time and there were many unfamiliar words.
These words could not be looked up by my Kindle because they were not found in any of on-device dictionaries.
These words were in Dune&rsquo;s glossary but flipping back-and-forth to that on a Kindle was a huge pain.</p>

<p>I initially worked around this by printing a word list from Wikipedia and carrying it with me.
This was better but it was still annoying.</p>

<p>I was so annoyed that I took a break from reading to figure out how to create a custom Kindle dictionary.
At the time, there wasn&rsquo;t a ton of great information online about how to do this.</p>

<p>Eventually, I found Amazon&rsquo;s <a href="https://s3.amazonaws.com/kindlegen/AmazonKindlePublishingGuidelines.pdf">Kindle Publishing Guidelines</a> and, referencing it, managed to figure out something that worked.
The link in the previous sentence is to the <strong>current</strong> documentation which is much nicer than the <a href="https://web.archive.org/web/20130408183149/http://s3.amazonaws.com/kindlegen/AmazonKindlePublishingGuidelines.pdf">mid-2013 documentation</a>.
The earlier documentation left me with questions and required quite a bit of experimentation.</p>

<p>Using the mid-2013 documentation, I developed some Clojure code to generate my <a href="https://gumroad.com/l/dune-dictionary">dictionary</a>.
Doing this in 2013 was annoying.
The documentation was not good.</p>

<p>I recently read <a href="https://www.gregegan.net/DIASPORA/DIASPORA.html">Greg Egan&rsquo;s Diaspora</a> and found myself wishing I had a custom dictionary.
I took a break from reading and packaged up Diaspora&rsquo;s glossary into a dictionary.
I could have stuck with my 2013 generator but I decided to update it and write this article about creating a Kindle dictionary in late 2020.</p>

<p>The new documentation is a bit better but it still isn&rsquo;t great.
Here is what you need to do.</p>

<h2>Making a dictionary</h2>

<p>Below are the steps to building a dictionary.</p>

<ol>
<li>Construct your list of words and definitions.</li>
<li>Convert the list into the format specified by Amazon.</li>
<li>Create a cover page.</li>
<li>Create a copyright page.</li>
<li>Create a usage page (definitely optional).</li>
<li>Make an <code>.opf</code> file.</li>
<li>Combine the files together.</li>
<li>Put it onto your device.</li>
</ol>


<h3>1. Construct your list of words and definitions</h3>

<p>There really are no set instructions for this.
Source your words and definitions and store them in some format that you&rsquo;ll be able to manipulate in a programming language.</p>

<p>I&rsquo;ve sourced words a few different ways.
I&rsquo;ve taken them straight from a book&rsquo;s glossary, a Wikipedia entry, and extracted them from a programming book&rsquo;s <a href="/blog/2013/07/09/releasing-the-functional-javascript-companion/">source code</a>.</p>

<h3>2. Convert the list into the format specified by Amazon</h3>

<p>Below is the basic scaffolding of the html file Amazon requires along with some inline styles that I think look decent on devices.
This has some extra stuff in it and also doesn&rsquo;t contain everything Amazon specifies.
But it works.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html</span> <span class="na">xmlns:math=</span><span class="s">&quot;http://exslt.org/math&quot;</span> <span class="na">xmlns:svg=</span><span class="s">&quot;http://www.w3.org/2000/svg&quot;</span>
</span><span class='line'>      <span class="na">xmlns:tl=</span><span class="s">&quot;https://kindlegen.s3.amazonaws.com/AmazonKindlePublishingGuidelines.pdf&quot;</span>
</span><span class='line'>      <span class="na">xmlns:saxon=</span><span class="s">&quot;http://saxon.sf.net/&quot;</span> <span class="na">xmlns:xs=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span>
</span><span class='line'>      <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
</span><span class='line'>      <span class="na">xmlns:cx=</span><span class="s">&quot;https://kindlegen.s3.amazonaws.com/AmazonKindlePublishingGuidelines.pdf&quot;</span>
</span><span class='line'>      <span class="na">xmlns:dc=</span><span class="s">&quot;http://purl.org/dc/elements/1.1/&quot;</span>
</span><span class='line'>      <span class="na">xmlns:mbp=</span><span class="s">&quot;https://kindlegen.s3.amazonaws.com/AmazonKindlePublishingGuidelines.pdf&quot;</span>
</span><span class='line'>      <span class="na">xmlns:mmc=</span><span class="s">&quot;https://kindlegen.s3.amazonaws.com/AmazonKindlePublishingGuidelines.pdf&quot;</span>
</span><span class='line'>      <span class="na">xmlns:idx=</span><span class="s">&quot;https://kindlegen.s3.amazonaws.com/AmazonKindlePublishingGuidelines.pdf&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;Content-Type&quot;</span> <span class="na">content=</span><span class="s">&quot;text/html; charset=utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;style&gt;</span>
</span><span class='line'>      <span class="nt">h5</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">font-size</span><span class="o">:</span> <span class="m">1em</span><span class="p">;</span>
</span><span class='line'>          <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nt">dt</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">font-weight</span><span class="o">:</span> <span class="k">bold</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="nt">dd</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">margin</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>          <span class="k">padding</span><span class="o">:</span> <span class="m">0</span> <span class="m">0</span> <span class="m">0.5em</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>          <span class="k">display</span><span class="o">:</span> <span class="k">block</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="nt">&lt;/style&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;mbp:framset&gt;</span>
</span><span class='line'>      [PUT THE WORDS HERE]
</span><span class='line'>    <span class="nt">&lt;/mbp:framset&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The <code>[PUT THE WORDS HERE]</code> part gets filled in with the markup for all of your words.
The basic structure for an entry looks like the following.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;idx:entry</span> <span class="na">name=</span><span class="s">&quot;default&quot;</span> <span class="na">scriptable=</span><span class="s">&quot;yes&quot;</span> <span class="na">spell=</span><span class="s">&quot;yes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;h5&gt;&lt;dt&gt;&lt;idx:orth&gt;</span>WORD HERE<span class="nt">&lt;/idx:orth&gt;&lt;/dt&gt;&lt;/h5&gt;</span>
</span><span class='line'>  <span class="nt">&lt;dd&gt;</span>DEFINITION<span class="nt">&lt;/dd&gt;</span>
</span><span class='line'><span class="nt">&lt;/idx:entry&gt;</span>
</span><span class='line'><span class="nt">&lt;hr/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Every word has an <code>&lt;idx:entry&gt;</code> block followed by a <code>&lt;hr&gt;</code>.
These two elements together comprise a single entry.</p>

<p>The <code>name</code> attribute on the <code>&lt;idx:entry&gt;</code> element sets the lookup index associated with the entry.
Unless you are building a dictionary with multiple indexes, you can pretty much ignore it.
Whatever value is provided needs to match the value found in the <code>.opf</code> file we&rsquo;ll make later.</p>

<p>The <code>scriptable</code> attribute makes the entry available from the index and can only have the value <code>"yes"</code>.
The <code>spell</code> can also only be <code>"yes"</code> and enables wildcard search and spell correction.</p>

<p>The markup you use inside the <code>idx:entry</code> element is mostly up to you.
The only markup you need is the <code>&lt;idx:orth&gt;</code> node.
Its content is the word being looked up.
The rest of the markup can be whatever you want.</p>

<p>I wrap the term in a <code>dt</code> and the definition in <code>dd</code> because it just feels like the right thing to do and provides tags to put some CSS styles on.
I wrap the <code>dt</code> element in an <code>h5</code> because I couldn&rsquo;t figure out what CSS styles would actually work on my Kindle voyage to put the term on its own line.</p>

<p>It isn&rsquo;t that I don&rsquo;t know what the styles should be but my Kindle did not respect them.
Figuring out stuff like this is part of the experimentation required to produce a dictionary that you&rsquo;re happy with.</p>

<p>There is additional supported markup that provides more functionality.
This includes providing alternative words that all resolve to the same entry, specifying if an exact match is required, and varying the search word from the displayed word.
Most dictionaries don&rsquo;t need these features so I&rsquo;m not going to elaborate on them.</p>

<h3>3. Construct a cover page.</h3>

<p>This is just a requirement of a Kindle.
Create a html file called <code>cover.html</code> and substitute in the appropriate values.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;</span>
</span><span class='line'>  <span class="nt">&lt;head&gt;</span>
</span><span class='line'>    <span class="nt">&lt;meta</span> <span class="na">content=</span><span class="s">&quot;text/html&quot;</span> <span class="na">http-equiv=</span><span class="s">&quot;content-type&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;body&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h1&gt;</span>Dune Dictionary<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>    <span class="nt">&lt;h3&gt;</span>Created by Jake McCrary<span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Amazon wants you to provide an image as well but you don&rsquo;t actually have to do this.
You probably need to do this if you actually publish the dictionary through Amazon<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>.</p>

<h3>4. Create a copyright page</h3>

<p>This is also a requirement of the Kindle publishing guide.
There isn&rsquo;t any special markup for doing this.</p>

<p>Just make another html file and fill in some appropriate details.</p>

<h3>5. Create a usage page</h3>

<p>This isn&rsquo;t a requirement but I include another page that explains how to use the dictionary.
Again, this is just a html document with some content in it.</p>

<h3>6. Make an <code>.opf</code> file.</h3>

<p>This is one of the poorly documented but extremely important parts of making a Kindle dictionary.
This is a XML file that ties together all the previous files into an actual dictionary.</p>

<p>Make an opf file and name it whatever you want; in this example we&rsquo;ll go with <code>dict.opf</code>.</p>

<p>Below is the one I&rsquo;ve used for the Diaspora dictionary.
If you&rsquo;ve created an image for a cover then lines 7 and 15 are the important and line 15 should be uncommented.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;package</span> <span class="na">version=</span><span class="s">&quot;2.0&quot;</span> <span class="na">xmlns=</span><span class="s">&quot;http://www.idpf.org/2007/opf&quot;</span> <span class="na">unique-identifier=</span><span class="s">&quot;BookId&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;metadata&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dc:title&gt;</span>A dictionary for Diaspora by Greg Egan<span class="nt">&lt;/dc:title&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dc:creator</span> <span class="na">opf:role=</span><span class="s">&quot;aut&quot;</span><span class="nt">&gt;</span>Jake McCrary<span class="nt">&lt;/dc:creator&gt;</span>
</span><span class='line'>    <span class="nt">&lt;dc:language&gt;</span>en-us<span class="nt">&lt;/dc:language&gt;</span>
</span><span class='line'>    <span class="nt">&lt;meta</span> <span class="na">name=</span><span class="s">&quot;cover&quot;</span> <span class="na">content=</span><span class="s">&quot;my-cover-image&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;x-metadata&gt;</span>
</span><span class='line'>      <span class="nt">&lt;DictionaryInLanguage&gt;</span>en-us<span class="nt">&lt;/DictionaryInLanguage&gt;</span>
</span><span class='line'>      <span class="nt">&lt;DictionaryOutLanguage&gt;</span>en-us<span class="nt">&lt;/DictionaryOutLanguage&gt;</span>
</span><span class='line'>      <span class="nt">&lt;DefaultLookupIndex&gt;</span>default<span class="nt">&lt;/DefaultLookupIndex&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/x-metadata&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/metadata&gt;</span>
</span><span class='line'>  <span class="nt">&lt;manifest&gt;</span>
</span><span class='line'>    <span class="c">&lt;!-- &lt;item href=&quot;cover-image.jpg&quot; id=&quot;my-cover-image&quot; media-type=&quot;image/jpg&quot; /&gt; --&gt;</span>
</span><span class='line'>    <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;cover&quot;</span>
</span><span class='line'>          <span class="na">href=</span><span class="s">&quot;cover.html&quot;</span>
</span><span class='line'>          <span class="na">media-type=</span><span class="s">&quot;application/xhtml+xml&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;usage&quot;</span>
</span><span class='line'>          <span class="na">href=</span><span class="s">&quot;usage.html&quot;</span>
</span><span class='line'>          <span class="na">media-type=</span><span class="s">&quot;application/xhtml+xml&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;copyright&quot;</span>
</span><span class='line'>          <span class="na">href=</span><span class="s">&quot;copyright.html&quot;</span>
</span><span class='line'>          <span class="na">media-type=</span><span class="s">&quot;application/xhtml+xml&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;item</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span>
</span><span class='line'>          <span class="na">href=</span><span class="s">&quot;content.html&quot;</span>
</span><span class='line'>          <span class="na">media-type=</span><span class="s">&quot;application/xhtml+xml&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/manifest&gt;</span>
</span><span class='line'>  <span class="nt">&lt;spine&gt;</span>
</span><span class='line'>    <span class="nt">&lt;itemref</span> <span class="na">idref=</span><span class="s">&quot;cover&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;itemref</span> <span class="na">idref=</span><span class="s">&quot;usage&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;itemref</span> <span class="na">idref=</span><span class="s">&quot;copyright&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;itemref</span> <span class="na">idref=</span><span class="s">&quot;content&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/spine&gt;</span>
</span><span class='line'>  <span class="nt">&lt;guide&gt;</span>
</span><span class='line'>    <span class="nt">&lt;reference</span> <span class="na">type=</span><span class="s">&quot;index&quot;</span> <span class="na">title=</span><span class="s">&quot;IndexName&quot;</span> <span class="na">href=</span><span class="s">&quot;content.html&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/guide&gt;</span>
</span><span class='line'><span class="nt">&lt;/package&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>An import element in this file is the <code>&lt;DefaultLookupIndex&gt;</code> element.
The <code>&lt;DefaultLookupIndex&gt;</code> content needs to contain the same value from the <code>name</code> attribute on your <code>&lt;idx:entry&gt;</code> elements.
The <code>&lt;DictionaryInLanguage&gt;</code> and <code>&lt;DictionaryOutLanguage&gt;</code> tell the Kindle the valid languages for your dictionary.</p>

<p>The other elements in the <code>&lt;metadata&gt;</code> should be pretty self-explanatory.</p>

<p>The <code>&lt;manifest&gt;</code> gives identifiers for the various files you&rsquo;ve made in the previous steps</p>

<p>The commented out <code>&lt;img&gt;</code> shows how you&rsquo;d add the cover image if you opt to have one.
For sideloading dictionaries onto Kindles, it is not required.</p>

<p>The <code>&lt;spine&gt;</code> section references the <code>&lt;item&gt;</code>s from the <code>&lt;manifest&gt;</code> and specifies the order they appear in your book.</p>

<p>I honestly don&rsquo;t remember why the <code>&lt;guide&gt;</code> section is in there or what it is doing in this example.
I&rsquo;m guessing that is what causes there to be an index with the word list in the dictionary but I haven&rsquo;t tried removing it and the documentation doesn&rsquo;t talk about it.
I only have it there since I had it in earlier dictionaries I made.</p>

<h3>7. Combine the files together</h3>

<p>The publishing guidelines (as of October 2020) tell you to combine the previously created files together using the command line tool <code>kindlegen</code>.
The problem with those instructions is that Amazon doesn&rsquo;t offer <code>kindlegen</code> as a download anymore.
If you want to use it, you can still find it through the Internet Archive.</p>

<p>Instead of following the publishing guidelines, we&rsquo;ll use Kindle Previewer to finish making the dictionary.
It is pretty straight forward.</p>

<ol>
<li>Download the <a href="https://www.amazon.com/gp/feature.html?ie=UTF8&amp;docId=1000765261">Kindle Previewer</a> application.</li>
<li>Open it up and click <code>File &gt; Open</code>.</li>
<li>Find your <code>dict.opf</code> file and open that.</li>
<li><code>File &gt; Export</code> and export it as a <code>.mobi</code> file.</li>
</ol>


<p>The conversion log will complain about a couple things such as missing cover.
As long as these are just <code>Warnings</code> it doesn&rsquo;t matter.</p>

<p>I&rsquo;ve found the preview in this app doesn&rsquo;t match what it looks like on your device so take it with a grain of salt.</p>

<h3>7. Put it onto your device</h3>

<p>Finally, put the dictionary onto your Kindle.
You can do this by either using a USB cable or by emailing it to your Kindle&rsquo;s email address.</p>

<p>Once it is on your Kindle, open it up and double check that the formatting is correct.
Next, open the book you&rsquo;ve made it for and try looking up a word.
If the lookup fails or uses another dictionary, click the dictionary name in the pop-up to change your default dictionary to yours.
Now when you try to look up a word, your dictionary is searched first.</p>

<p>The great thing is that if a word <em>isn&rsquo;t</em> in your dictionary then the Kindle searches the other dictionaries<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>.
This feature is great as it lets your dictionary be very focused.
Hopefully Amazon doesn&rsquo;t remove this feature.</p>

<h2>End</h2>

<p>It was interesting creating another dictionary so long after I made my first couple.
Some of the new features, like the ability to require an exact word match, would have been useful for my <a href="/blog/2013/07/09/releasing-the-functional-javascript-companion/">second dictionary</a>.
The actual markup recommendations have changed over the years but luckily my <a href="https://gumroad.com/l/dune-dictionary">Dune dictionary</a> still works.
I&rsquo;m not constantly checking that it works, so if Amazon had changed something and it broke, I probably wouldn&rsquo;t notice until someone reported it.</p>

<p>The Kindle documentation is much better now compared to 2013 but it still isn&rsquo;t great.</p>

<p>It is also a bummer that <code>kindlegen</code> is gone.
It was nice to be able to convert the input files from the command line.
I also think this means you can no longer make a dictionary from a Linux machine as I don&rsquo;t remember seeing Kindle Previewer support.</p>

<p>If you&rsquo;re ever in a situation where you think a custom dictionary would be useful, feel free to reach out.</p>

<p>Go forth and make dictionaries.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>This is actually a challenge to do due to restrictions on what Amazon allows published.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>No idea if it searches all of them in some order but I&rsquo;m very glad it works this way.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>


    <em>Looking forward to the next article? Never miss a post by subscribing using <a target="_blank" href="https://jakemccrary.substack.com/welcome">e-mail</a> or <a href="http://feeds.feedburner.com/JakeMccrarysMusings">RSS</a>. The <a target="_blank" href="https://jakemccrary.substack.com/welcome">e-mail newsletter</a> goes out periodically (about every month) and includes reviews of books I've been reading and links to stuff I've found interesting.
</em>

    <footer>
      <p class="meta">
        
  

<span class="byline author vcard">Posted by <span class="fn">Jake McCrary</span></span>

        




<time class='entry-date' datetime='2020-11-11T19:23:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2020</span></span> <span class='time'>7:23 pm</span></time>
        

<span class="categories">
  
    <a class='category' href='/blog/categories/dictionary/'>dictionary</a>, <a class='category' href='/blog/categories/kindle/'>kindle</a>
  
</span>


      </p>
      
      <div class="sharing">
  
</div>

      
      <p class="meta">
        
        <a class="basic-alignment left" href="/blog/2020/10/03/go-create-silly-small-programs/" title="Previous Post: Go create silly, small programs">&laquo; Go create silly, small programs</a>
        
        
        <a class="basic-alignment right" href="/blog/2020/11/14/speeding-up-magit/" title="Next Post: Speeding up magit">Speeding up magit &raquo;</a>
        
      </p>
    </footer>
  </article>
  
  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite">

  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <div id="disqus_target" >
    <script>
     var insertDisqus = function() {
       var elem = document.createElement('script');
       elem.innerHTML =  "var disqus_shortname = 'jakemccrary'; var disqus_identifier = 'https://jakemccrary.com/blog/2020/11/11/creating-a-custom-kindle-dictionary/'; var disqus_url = 'https://jakemccrary.com/blog/2020/11/11/creating-a-custom-kindle-dictionary/'; (function () {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);}());"
       var target = document.getElementById('disqus_target');
       target.parentNode.replaceChild(elem, target);
     }
    </script>
    <button class="comment-button" onclick="insertDisqus()"><span>ENABLE COMMENTS AND RECOMMENDED ARTICLES</span></button>
  </div>

</div>
  </section>
  
</div>

<aside class="sidebar">
  
  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2021/01/24/reading-in-2020/">Reading in 2020</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/12/30/speeding-up-magit-with-the-native-comp-branch-of-emacs/">Speeding up Magit with the native-comp branch of Emacs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/14/speeding-up-magit/">Speeding up magit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/11/creating-a-custom-kindle-dictionary/">Creating a custom Kindle dictionary</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/10/03/go-create-silly-small-programs/">Go create silly, small programs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/08/31/utilities-i-like-selecta/">Utilities I like: selecta</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/07/03/introducing-photo-fit/">Introducing Photo Fit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/06/28/using-bazel-to-help-fix-flaky-tests/">Using Bazel to help fix flaky tests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/05/04/how-to-be-alerted-when-a-long-running-process-finishes/">How to be automatically notified when long running processes finish</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/04/26/hanging-a-hangboard-using-a-doorway-pull-up-bar/">How to hang a hangboard using a doorway pull-up bar</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Subscribe</h1>
  <p>Looking forward to reading more of my writing?</p>
  <p>Sign up for my <a target="_blank" href="https://jakemccrary.substack.com/welcome">newsletter</a> to get periodic emails with links to my latest writing and other thoughts.</p>
  <p>Can't wait for the infrequent newsletter? Subscribe to the <a href="http://feeds.feedburner.com/JakeMccrarysMusings">RSS</a> feed.</p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="/disclosure-policy">Disclosure Policy</a><br/>
  <a href="//www.iubenda.com/privacy-policy/509351" class="iubenda-nostyle iub-legal-only iubenda-embed" title="Privacy Policy">Privacy Policy</a><br/>
<script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src = "//cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
  Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
</p>


</footer>
  


</body>
</html>
