
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="iem7"><![endif]-->
<!--[if lt IE 9]><html class="lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Speeding up my blog - Jake McCrary</title>
    <meta name="author" content="Jake McCrary">

    
    
    
    

    <meta itemprop="name" content="Speeding up my blog" />
    <meta itemprop="description" content="In an effort to improve my readers' experience I made my Octopress blog load significantly faster." />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jakemcc" />
    <meta name="twitter:title" content="Speeding up my blog" />
    <meta name="twitter:description" content="In an effort to improve my readers' experience I made my Octopress blog load significantly faster." />
    <meta name="twitter:creator" content="@jakemcc" />
    <meta name="twitter:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />

    <!-- Open Graph data -->
    <meta property="og:site_name" content="The Blog of Jake McCrary" />
    <meta property="og:url" content="https://jakemccrary.com/blog/2016/04/30/speeding-up-my-blog/" />
    <meta property="og:title" content="Speeding up my blog" />
    <meta property="og:description" content="In an effort to improve my readers' experience I made my Octopress blog load significantly faster." />
    <meta property="og:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />
    
      <meta property="og:type" content="article" />
    
    
      <meta property="article:published_time" content="2016-04-30T23:42:00-05:00" />
    

    <meta name="description" content="In an effort to improve my readers' experience I made my Octopress blog load significantly faster.">

    <meta name="keywords" content="octopress, blog, writing, javascript">

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://jakemccrary.com/blog/2016/04/30/speeding-up-my-blog/">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="alternate" title="Jake McCrary" type="application/atom+xml">
    <link href="https://jakemccrary.com/feed.json" rel="alternate" title="Jake McCrary" type="application/json">

    <!-- iOS scaling bug fix Rewritten version By @mathias, @cheeaun and @jdalton Source url: https://gist.github.com/901295 -->
    <script type="text/javascript">
     (function(doc) {
       var addEvent = 'addEventListener',
           type = 'gesturestart',
           qsa = 'querySelectorAll',
           scales = [1, 1],
           meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];
       function fix() {
         meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
         doc.removeEventListener(type, fix, true);
       }
       if ((meta = meta[meta.length - 1]) && addEvent in doc) {
         fix();
         scales = [0.25, 1.6];
         doc[addEvent](type, fix, true);
       }
     }(document));
    </script>
    
<script>
 var origin = window.location.origin;
 if (!origin) {
   origin = window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');
 }
 if (origin.indexOf('localhost') === -1) {
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-19834208-2', 'auto');
   ga('send', 'pageview');
 }
</script>


  </head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Jake McCrary</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul role=main-navigation>
  <li><a href="/">Articles</a></li>
  <li><a href="/adventures/">Adventures</a></li>
  <li><a href="/about.html">About</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
  <li><a href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>

  <form action="https://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="sitesearch" value="jakemccrary.com">
      <input class="search" type="text" name="q" placeholder="Search"/>
    </fieldset>
  </form>

</nav>
  <div id="main">
    <div id="content">
      <div>
  <article class="hentry" role="article">
    
  <header>
    
      <h1 class="entry-title">Speeding up my blog</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-04-30T23:42:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:42 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I was recently reading
<a href="https://jefframnani.com/about/">Jeff Ramnani&rsquo;s</a> <em>about</em> page and I
was somewhat inspired by it. It loads quickly and links to
<a href="http://mattgemmell.com/designing-blogs-for-readers/">Designing blogs for readers</a>,
an interesting essay by Matt Gemmmell. Reading that essay inspired me
to think about my own site and what experience I want to deliver to
readers.</p>

<p>I can&rsquo;t imagine what every reader wants but I know what I want to
experience when I read an article online. Reading high quality content
is my highest priority. Beyond that I enjoy when a page loads fast and
the visual design doesn&rsquo;t get in the way. I think a great example of
these two requirements is <a href="http://zenhabits.net/falling/">zen habits</a>
(along with Jeff Ramnani&rsquo;s and Matt Gemmell&rsquo;s).</p>

<p>My own site sort of achieves those goals. I like to think I&rsquo;m writing
well-written content that helps others. I know it has helped me. With
regards to visual design I think there is room for improvement. I don&rsquo;t
think my site&rsquo;s design is actively distracting from the content
though, so I&rsquo;ve decided to focus on improving the page load time
first.</p>

<h2>The optimization process</h2>

<p>As with any optimization problem it is important figure what you&rsquo;re
going to measure, how you&rsquo;re going to measure it and your starting
point. I decided to focus on my page load time, as measured by
<a href="http://www.webpagetest.org">Web Page Test</a>. I used Google&rsquo;s
<a href="https://developers.google.com/speed/pagespeed/insights/">PageSpeed Insights</a>
to score and provide helpful tips for improving page
speed. Unfortunately I didn&rsquo;t capture my starting point with PageSpeed
Insights but I think I was scoring around a 66/100 for mobile and
79/100 for desktop.</p>

<p><img src="/images/before-optimizations.png" alt="Starting point from Web Page Test" /></p>

<p>As measured by Web Page Test, the first load of my main page took five
seconds and it wasn&rsquo;t fully loaded for another second. This is
ridiculous. My page is almost entirely static content and most of my
assets are served from CloudFlare. It should be blazing fast.</p>

<p>Next I looked at what was actually being loaded. Google&rsquo;s PageSpeed
Insights identified that I had three render-blocking <code>script</code>
tags. The offending scripts were Modernizr, jQuery, and
octopress.js. PageSpeed Insights
<a href="https://developers.google.com/speed/docs/insights/BlockingJS#overview">recommends</a>
inlining JavaScript required to render the page or make loading
asynchronous. I decided to go a step further and remove the need for
the JavaScript.</p>

<h3>Removing octopress.js</h3>

<p>It turns out <code>octopress.js</code> was the reason Modernizr and jQuery were
required. Most of what
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js">octopress.js</a>
did were things that I don&rsquo;t need; some sort of
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L111">flash video fallback</a>,
adding line numbers to
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L112">GitHub Gists</a>,
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L99">rendering</a>
delicious links, and toggling the
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L114">sidebar visibility</a>. I
was able to delete all that code.</p>

<p>Next up was the
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L1-L13">mobile navigation</a>
<code>octopress.js</code> provided. This feature enabled navigation through a
<code>&lt;select&gt;</code> element when the reader&rsquo;s view port was tiny. Restyling my
navigation bar to fit better on small screens allowed me to remove
this feature. <code>ocotpress.js</code> also did some
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L37">feature detection</a>
for Modernizr. I stopped using image masks and was able to remove that
code as well.</p>

<p>The remaining code in <code>octopress.js</code> was a workaround for an
<a href="https://github.com/jakemcc/jakemccrary.com/blob/c27a131aef437181dcab9552c3241f8adafb3884/source/javascripts/octopress.js#L121-L136">iOS scaling bug</a>. This
JavaScript was inlined into my html. At this point <code>octopress.js</code> was
empty and with it empty the requirements for jQuery and Modernizer
disappeared. This let me remove three render-blocking <code>script</code> tags.</p>

<h3>Remaining JavaScript</h3>

<p>At this point the remaining JavaScript used for my blog was enabling
comments with Disqus and showing recent tweets in my sidebar. I still
enjoy having comments on my blog so I&rsquo;m keeping Disqus around. I doubt
that readers care what my most recent tweets are so I removed
Twitter&rsquo;s JavaScript. Removing my tweets also cleans up my sidebar and
helps keep the focus on my writing.</p>

<h3>Nearly no JavaScript, now what?</h3>

<p>At this point Google&rsquo;s PageSpeed Insight was suggesting that I up my
cache times, inline my css, and move my web fonts lower on my
page. Bumping up my cache times was trivial; I simply tweaked a
CloudFlare setting.</p>

<p>I opted to not inline my css. This would require me to modify my
site&rsquo;s generation and I just didn&rsquo;t feel like diving down that rabbit
hole. I also didn&rsquo;t move the web fonts lower on the page. I find fonts
re-rendering jarring and as a result kept them loading<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> in my <code>&lt;head&gt;</code>.</p>

<h2>The results</h2>

<p>I used Web Page Test to measure again and now the page load time is
down to 2.5 seconds. Page load times are cut in half from the starting
point. My PageSpeed Insights scores are also higher; up to 79/100 for mobile
and 92/100 for desktop.</p>

<p><img src="/images/after-optimizations.png" alt="Web Page Test after optimization" /></p>

<p>Honestly, that number still seems high<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup> to me and I&rsquo;m sure I could
get it lower. But for now it is good enough<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>. As a result of doing
this I&rsquo;ve learned more about my blogging setup and managed to speed up
my page load. Now it is time to focus on researching for future
posts (and at some point restyling).</p>

<h2>Update on 2016-05-03</h2>

<p>I completely removed web font loading from my site. Getting rid of the
fonts reduced my load time, as measured by Web Page Test, by a
second. Google&rsquo;s PageSpeed Insights now scores this site at 90/100 for
mobile and 96/100 for desktop.</p>

<p><img src="/images/after-optimizations2.png" alt="Web Page Test after font removal" /></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>When I first wrote this I didn&rsquo;t change anything about my web fonts. After thinking about it for a few days I ended up removing them completely. Details are in the update at the end of the post.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>I&rsquo;m asking Web Page Test to load my page using IE10. I get much faster load times using Chrome or Firefox locally which is what most of my readers use. This is good enough for now.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>I mean, the starting point was probably good enough but if I admitted that then I wouldn&rsquo;t have had the excuse to dig into my site&rsquo;s load time.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>


    <em>Looking forward to the next article? Never miss a post by subscribing using <a target="_blank" href="https://jakemccrary.substack.com/">e-mail</a> or <a href="https://feeds.feedburner.com/JakeMccrarysMusings">RSS</a>.
</em>

    <footer>
      <p class="meta">
        
  

<span class="byline author vcard">Posted by <span class="fn">Jake McCrary</span></span>

        




<time class='entry-date' datetime='2016-04-30T23:42:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>11:42 pm</span></time>
        

<span class="categories">
  
    <a class='category' href='/blog/categories/blog/'>blog</a>
  
</span>


      </p>
      
      <div class="sharing">
  
</div>

      
      <p class="meta">
        
        <a class="basic-alignment left" href="/blog/2016/04/10/the-usefulness-of-clojures-cond-arrow/" title="Previous Post: The usefulness of Clojure's cond->">&laquo; The usefulness of Clojure's cond-></a>
        
        
        <a class="basic-alignment right" href="/blog/2016/05/14/use-google-to-get-a-sites-favicon/" title="Next Post: Use Google to get a site's favicon">Use Google to get a site's favicon &raquo;</a>
        
      </p>
    </footer>
  </article>
  
  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite">

  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <div id="disqus_target" >
    <script>
     var insertDisqus = function() {
       var elem = document.createElement('script');
       elem.innerHTML =  "var disqus_shortname = 'jakemccrary'; var disqus_identifier = 'https://jakemccrary.com/blog/2016/04/30/speeding-up-my-blog/'; var disqus_url = 'https://jakemccrary.com/blog/2016/04/30/speeding-up-my-blog/'; (function () {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);}());"
       var target = document.getElementById('disqus_target');
       target.parentNode.replaceChild(elem, target);
     }
    </script>
    <button class="comment-button" onclick="insertDisqus()"><span>ENABLE COMMENTS AND RECOMMENDED ARTICLES</span></button>
  </div>

</div>
  </section>
  
</div>

<aside class="sidebar">
  
  <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2020/04/21/using-bash-preexec-for-monitoring-the-runtime-of-your-last-command/">Using Bash-Preexec for monitoring the runtime of your last command</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/03/16/a-retrospective-format/">A retrospective format for remote or co-located teams</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/03/10/more-working-from-home-tips/">More working from home tips</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/02/25/auto-syncing-a-git-repository/">Auto-syncing a git repository</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/01/11/reading-in-2019/">Reading in 2019</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/10/12/building-an-atreus-keyboard/">Building an Atreus keyboard</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/08/23/building-a-onewheel-stand/">Building a Onewheel stand</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/08/15/switching-my-ergodox-to-qmk-firmware/">Switching my Ergodox to QMK firmware</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/04/30/how-i-use-social-media/">How I use social media</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/03/20/breaking-change-and-more-in-lein-test-refresh-0-dot-24-dot-0/">Breaking change and more in lein-test-refresh 0.24.1</a>
      </li>
    
  </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="/disclosure-policy">Disclosure Policy</a><br/>
  <a href="//www.iubenda.com/privacy-policy/509351" class="iubenda-nostyle iub-legal-only iubenda-embed" title="Privacy Policy">Privacy Policy</a><br/>
<script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src = "//cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
  Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
</p>


</footer>
  


</body>
</html>
