
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="iem7"><![endif]-->
<!--[if lt IE 9]><html class="lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Jake McCrary</title>
    <meta name="author" content="Jake McCrary">

    
    
    
    

    <meta itemprop="name" content="Jake McCrary" />
    <meta itemprop="description" content=" I&rsquo;m the type of computer user that wants an organized
workspace. To me this means having my active applications organized
into a grid. &hellip;" />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jakemcc" />
    <meta name="twitter:title" content="Jake McCrary" />
    <meta name="twitter:description" content=" I&rsquo;m the type of computer user that wants an organized
workspace. To me this means having my active applications organized
into a grid. &hellip;" />
    <meta name="twitter:creator" content="@jakemcc" />
    <meta name="twitter:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />

    <!-- Open Graph data -->
    <meta property="og:site_name" content="Writing by Jake McCrary" />
    <meta property="og:url" content="https://jakemccrary.com/blog/10/" />
    <meta property="og:title" content="Jake McCrary" />
    <meta property="og:description" content=" I&rsquo;m the type of computer user that wants an organized
workspace. To me this means having my active applications organized
into a grid. &hellip;" />
    <meta property="og:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />
    
    

    <meta name="description" content=" I&rsquo;m the type of computer user that wants an organized
workspace. To me this means having my active applications organized
into a grid. &hellip;">

    

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://jakemccrary.com/blog/10/">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="alternate" title="Jake McCrary" type="application/atom+xml">
    <link href="https://jakemccrary.com/feed.json" rel="alternate" title="Jake McCrary" type="application/json">

    <!-- iOS scaling bug fix Rewritten version By @mathias, @cheeaun and @jdalton Source url: https://gist.github.com/901295 -->
    <script type="text/javascript">
     (function(doc) {
       var addEvent = 'addEventListener',
           type = 'gesturestart',
           qsa = 'querySelectorAll',
           scales = [1, 1],
           meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];
       function fix() {
         meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
         doc.removeEventListener(type, fix, true);
       }
       if ((meta = meta[meta.length - 1]) && addEvent in doc) {
         fix();
         scales = [0.25, 1.6];
         doc[addEvent](type, fix, true);
       }
     }(document));
    </script>
    
<script>
 var origin = window.location.origin;
 if (!origin) {
   origin = window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');
 }
 if (origin.indexOf('localhost') === -1) {
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-19834208-2', 'auto');
   ga('send', 'pageview');
 }
</script>


  </head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Jake McCrary</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul role=main-navigation>
  <li><a href="/">Articles</a></li>
  <li><a href="/adventures/">Adventures</a></li>
  <li><a href="/about.html">About</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
  <li><a href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  <li><a href="https://jakemccrary.substack.com/welcome" target="_blank" rel="subscribe-email" title="subscribe via email">Newsletter</a></li>
</ul>

  <form action="https://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="sitesearch" value="jakemccrary.com">
      <input class="search" type="text" name="q" placeholder="Search"/>
    </fieldset>
  </form>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/15/manage-your-workspace-with-grids-under-linux-osx-and-windows/">Manage your workspace with grids under Linux, OS X, and Windows</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-15T19:15:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:15 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m the type of computer user that wants an organized
workspace. To me this means having my active applications organized
into a grid. Efficiently doing this is important to me. Before I jump
into what tools I use let me give a quick explanation of what
organized into a grid means to me.</p>

<p>Imagine that your screen is divided both vertically and
horizontally. To me a good tool for managing windows lets you take
your active application and move it so it fits in any rectangle formed
by the edges of your screen and those two lines splitting your
monitor. This means that with a keystroke you can make the active
window take up the full screen, half screen, or quarter screen. Below
I&rsquo;ve listed the tools that let me do that.</p>

<h4>Linux</h4>

<p>I&rsquo;ve switched to using <a href="http://i3wm.org/">i3</a>, a
<a href="http://en.wikipedia.org/wiki/Tiling_window_manager">tiling window manager</a>
instead of the default window manager on every distribution I use. When using
i3 the tiling is done automatically. There are hotkeys for changing
window layout and for moving focus between windows. The automatic tiling and
shortcuts take a bit to get used to, but now that I am I can&rsquo;t believe
I switched to using a tiling window manager sometime in the last eight
months.</p>

<h4>Windows</h4>

<p>When developing under Windows I use
<a href="http://winsplit-revolution.com/">Winsplit Revolution</a>. Unlike i3,
Winsplit Revolution only provides hotkeys snapping windows to
different locations. This is admittedly more approachable than i3 as
the grid isn&rsquo;t forced on you. WinSplit Revolution is pretty flexible,
you can change shortcuts and even define your own grid.</p>

<p>I can&rsquo;t remember when I started using Winsplit Revolution but it has
become a vital tool for when I&rsquo;m stuck doing development on a Windows
machine.</p>

<h4>OS X</h4>

<p>My only OS X machine is my 13 inch MacBook Air. I always thought that
with such a small screen being able to tile my windows wouldn&rsquo;t be as
useful. I  was completely wrong. If anything it may be more useful
because of the tiny screen real estate. The 13 inch screen is just wide
enough to have an editor up on one half and documentation on the
other.</p>

<p>The tool I use to snap my windows to a grid is
<a href="http://spectacleapp.com/">Spectacle</a>. Spectacle provides some
sensible keystrokes for moving windows around. The hotkeys are
similar to Winsplit Revolution&rsquo;s which makes switching between
operating systems easy.</p>

<p>If you haven&rsquo;t tried using a tool to help you organize your windows I
highly recommend that you do. I&rsquo;ve introduced both technical and
non-technical people to these tools and everyone has enjoyed them.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/31/change-volume-from-the-command-line/">Change volume from the command line</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-03-31T16:17:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2013</span></span> <span class='time'>4:17 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>On my Ubuntu desktop the volume at 100% is often too quiet. With Ubuntu&rsquo;s default window manager I could open up the graphical &ldquo;Sound Preferences&rdquo; and bump the volume to above 100%. After using <a href="http://i3wm.org/">i3 window manager</a> for a while I found myself missing this and took the time to figure out how to do it from the command line.</p>

<p>Ubuntu uses <a href="http://www.freedesktop.org/wiki/Software/PulseAudio">PulseAudio</a> to handle sound related tasks. The tool <a href="http://linux.die.net/man/1/pacmd">pacmd</a> allows you to change PulseAudio settings, such as volume, on the fly. The command is <code>pacmd set-sink-volume &lt;sink-index&gt; &lt;sink-volume&gt;</code> where <code>&lt;sink-index&gt;</code> is an identifier for your output device and <code>&lt;sink-volume&gt;</code> is an integer greater than or equal to zero. Zero represents muted and 65536 represents 100% volume. <code>&lt;sink-index&gt;</code> is the index found in the output from the <code>pacmd list-sinks</code> for your output card. In my case it is 0.</p>

<p>The below script makes changing volume with <code>pacmd</code> straightforward. I&rsquo;m using Perl convert a percentage into the proper units for the <sink-volume> argument. Using this script if you want to pull a <a href="http://www.youtube.com/watch?v=EbVKWCpNFhY">Spinal Tap</a> and go above 100% you simply pass in a number greater than 100.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;$1&quot;</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
</span><span class='line'>  <span class="nb">echo</span> <span class="s2">&quot;Need to supply a percentage&quot;</span>
</span><span class='line'>  <span class="nb">exit </span>1
</span><span class='line'><span class="k">fi</span>
</span><span class='line'>
</span><span class='line'><span class="nv">vol</span><span class="o">=</span><span class="k">$(</span>perl -e <span class="s2">&quot;print int(65536 * ($1 / 100))&quot;</span><span class="k">)</span>
</span><span class='line'><span class="nb">echo</span> <span class="s2">&quot;Setting volume to $1 ($vol)&quot;</span>
</span><span class='line'>pacmd <span class="nb">set</span>-sink-volume <span class="m">0</span> <span class="nv">$vol</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/03/maintaining-directory-layout-when-selectively-copying-files/">Maintaining Directory Layout When Selectively Copying Files</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-02-03T12:24:00-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>3</span><span class='date-suffix'>rd</span>, <span class='date-year'>2013</span></span> <span class='time'>12:24 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>Ran into a situation where I needed to replace certain files in a directory tree with files from a similarly shaped directory tree. The other files in each tree needed to remain untouched. Below is an example of the directory structure.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>root-dir
</span><span class='line'>├── target-dir
</span><span class='line'>│   ├── 20121230
</span><span class='line'>│   │   ├── data.csv
</span><span class='line'>│   │   └── instruments.csv
</span><span class='line'>│   └── 20121231
</span><span class='line'>│       ├── data.csv
</span><span class='line'>│       └── instruments.csv
</span><span class='line'>└── other-dir
</span><span class='line'>    ├── 20121230
</span><span class='line'>    │   ├── data.csv
</span><span class='line'>    │   └── instruments.csv
</span><span class='line'>    └── 20121231
</span><span class='line'>        ├── data.csv
</span><span class='line'>        └── instruments.csv
</span></code></pre></td></tr></table></div></figure>


<p>Goal is to copy <strong>instruments.csv</strong> from the sub-directories of <strong>other-dir</strong> to the matching sub-directories of <strong>target-dir</strong>. In the past I&rsquo;ve solved this by being in the <strong>other-dir</strong> directory and banging out a <code>for</code> loop at the command line (<code>other-dir$</code> is the bash prompt).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>other-dir<span class="nv">$ </span><span class="k">for</span> d in <span class="k">$(</span>ls<span class="k">)</span><span class="p">;</span> <span class="k">do</span> cp <span class="nv">$d</span>/instruments.txt ../target-dir/<span class="nv">$d</span>/<span class="p">;</span> <span class="k">done</span>
</span></code></pre></td></tr></table></div></figure>


<p>One feature (or issue) with this approach is that if a sub-directory exists in <strong>other-dir</strong> but not in <strong>target-dir</strong> that sub-directory will not be created in <strong>target-dir</strong>.</p>

<p>I took a bit of time to explore other ways of accomplishing this task and stopped after coming up with two additional ways.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>other-dir<span class="nv">$ </span>find . -name <span class="s2">&quot;instruments.txt&quot;</span> <span class="p">|</span> xargs -I <span class="o">{}</span> cp <span class="o">{}</span> ../target-dir/<span class="o">{}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above is basically the same as the first solution. It uses <code>find</code> to generate the list of files and then constructs <code>cp</code> commands. It also doesn&rsquo;t create sub-directories in <strong>target-dir</strong>.</p>

<p>The next example has different behavior from the above <code>cp</code> solutions. Like the second solution, it generates a list of files to copy using <code>find</code> but then uses <code>rsync</code> with the <code>--files-from</code> flag to mirror those files under <strong>target-dir</strong>. Unlike the <code>cp</code> based solutions, sub-directories of <strong>other-dir</strong> that do not exist in <strong>target-dir</strong> will be created.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>other-dir<span class="nv">$ </span>find . -name <span class="s2">&quot;instruments.txt&quot;</span> <span class="p">|</span> rsync --files-from<span class="o">=</span>- . ../target-dir
</span></code></pre></td></tr></table></div></figure>


<p>I&rsquo;m sure there are many more ways of accomplishing this task. Figuring out the three above was enough for me. They are fairly straight forward and don&rsquo;t depend on esoteric command line flags. The solution I use in the future will depend on whether or not I need sub-directories created in the target directory.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/28/working-on-multiple-clojure-projects-at-once/">Working on multiple Clojure projects at once</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2012-03-28T21:18:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2012</span></span> <span class='time'>9:18 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>Very few coders would debate the wisdom of breaking a project into smaller libraries. One complaint about breaking a project into tinier libraries is the added hassle of making changes simultaneously to multiple projects at once. Constantly releasing a library so another project can pick up changes is annoying and slows you down. Luckily for us in a <a href="http://clojure.org">Clojure</a> project using <a href="https://github.com/technomancy/leiningen">Leiningen</a> it is simple to make changes to a library and then use those changes without needing to perform a release.</p>

<p>This is accomplished by using the <code>checkouts</code> directory feature of Leiningen. This is a feature that, despite being listed in the Leiningen FAQ, I only recently discovered. To make your Clojure project (from now on calling this the main project) depend on the source of another project simply make a <code>checkouts</code> directory in your main project&rsquo;s root directory and then in <code>checkouts</code> link to the root of the library&rsquo;s project. This causes the library to be added to the main project&rsquo;s classpath. Now you can make changes to the main project and its dependencies without going through the hassle of releasing new versions of the library for every change.</p>

<p>In case the above paragraph isn&rsquo;t clear, here is an example of the main projects directory structure.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">pwd</span>
</span><span class='line'>src/main-project
</span><span class='line'><span class="nv">$ </span>tree
</span><span class='line'>.
</span><span class='line'>├── checkouts
</span><span class='line'>│   └── subproject -&gt; /Users/jmccrary/src/temp/subproject/
</span><span class='line'>├── project.clj
</span><span class='line'>├── src
</span><span class='line'>│   └── main_project
</span><span class='line'>│       └── core.clj
</span><span class='line'>└── <span class="nb">test</span>
</span><span class='line'>    └── main_project
</span><span class='line'>        └── core_test.clj
</span><span class='line'><span class="nv">$ </span>ls checkouts/subproject/
</span><span class='line'>README project.clj src <span class="nb">test</span>
</span></code></pre></td></tr></table></div></figure>


<p>Running a <code>lein classpath</code> in the main project directory and we can see the classpath has the subproject in it. I&rsquo;ve edited the <code>lein classpath</code> output to remove most entries not related to subproject and to make it easier to read. As the example shows the subproject has been added to the classpath.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>lein classpath
</span><span class='line'>...:
</span><span class='line'>src/main-project/checkouts/subproject/src
</span><span class='line'>src/main-project/checkouts/subproject/classes
</span><span class='line'>src/main-project/checkouts/subproject/resources
</span><span class='line'>src/main-project/lib/clojure-1.3.0.jar
</span></code></pre></td></tr></table></div></figure>


<p>The Leiningen checkouts directory option is pretty useful. This feature isn&rsquo;t there to discourage you from releasing versions of a library, but instead is there to facilitate quicker development cycles. I&rsquo;d encourage you to experiment with it and figure out of it makes you more effective.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/29/reflections-on-stanfords-online-class-experiment/">Reflections on Stanford's online class experiment</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-12-29T18:42:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>29</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>6:42 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>This past fall I took part in Stanford&rsquo;s online learning experiment. For those of you who are not aware, Stanford gave anyone with Internet access the opportunity to enroll in three different online courses. This was free of charge, not even books were required. Each was an introductory level class, with the three subjects being <a href="http://ai-class.com">artificial intelligence</a>, <a href="http://ml-class.org">machine learning</a>, and <a href="http://db-class.org">databases</a> (links may die as offered classes change). As far as I know, this was the first time that lecture videos have been paired with scheduled homework, quizzes, and programming assignments at this scale. I only vaguely remember numbers for the AI (artificial intelligence) and ML (machine learning) classes but I believe before classes began there were greater than 100,000 students enrolled apiece. The number of active students was approximately a third of the enrolled number. Even still, this is teaching at an unheard of scale.</p>

<p>I enrolled in both the AI and ML courses. Enrolling in two was more work, but I&rsquo;m glad I did it. The classes followed slightly different formats and taking both provided a perspective in what style worked better for me.</p>

<h3>AI Class</h3>

<p>The AI class had video lectures, in video quizzes, homework, and two exams. The videos for this class were short. Each video lasted approximately one to four minutes. This was a nice length as you could easily go back and pick out specific topics to re-watch without jumping around a longer video. The videos showed the professor hand writing notes on pieces of paper. This style made it seem like you were receiving one-on-one tutoring.</p>

<p>At the end of some of the videos a quiz question was asked. These questions did not count towards your final grade. They existed to help you think and learn about the material as it was being presented.</p>

<p>The homework usually consisted of a fewer than 10 questions. You had until the due date to submit or change your answers. You did not get any feedback on the homework until it was graded.</p>

<p>For both of the exams you had about three days to finish the 15 or so questions that were asked.</p>

<h3>ML Class</h3>

<p>The ML class had video lectures, in video quizzes, homework, and programming assignments. In contrast to the AI class, the ML video lectures were usually five to thirteen minutes long. This made it harder to re-watch specific parts as you had to jump around the video to find different topics. On the plus side, the ML videos could be easily downloaded and watched on any device (you could not do this with the AI lectures). The ML videos also had controls for speeding up playback. I watched the vast majority of the videos at 1.5 times the normal speed.</p>

<p>The video questions for the ML class were similar to the AI class in that they didn&rsquo;t count towards a final grade and there was usually a max of one per video. Because of the fewer number of videos, there were fewer quizzes than in the AI class. More quizzes would be good, as it forces the student to think instead of simply zoning out while watching the lectures.</p>

<p>The homework in the ML class was different from the AI class in a couple of ways. The largest difference was that you received feedback immediately when you submitted your answers. You were allowed to attempt the homework as often as you liked and your highest score became your score for that assignment. The questions were somewhat different between different attempts to minimize memorization of answers. There was also a minimum waiting period of ten minutes between attempts, but in order to reduce reliance on simply remembering previous attempts I usually waited a few hours to a day between attempts.</p>

<p>The ML class had programming assignments. In these exercises you filled in some <a href="http://www.gnu.org/software/octave/">Octave</a> code to implement an aspect of machine learning. These exercises where great. Most of the time they made you think about the techniques you were learning that week. It was also nice to get some hands-on experience solving sample machine learning problems. It was rewarding watching my simple spam filter flag email as spam. The programming exercises were best when they weren&rsquo;t simply a task in translating math to code.</p>

<h3>Thoughts on the differences</h3>

<p>I enjoyed the ML class homework style, instant feedback upon submission, better than the AI because it provided a quicker feedback cycle. Instead of submitting homework answers and waiting to review mistakes you were able to review instantly. I found this, and being able to repeat homework, to be more effective for learning than the single shot style of the AI class.</p>

<p>I preferred the shortness of the AI lectures. It allowed for easier repetition of lectures and provided more opportunities for quizzes. I also preferred the handwritten style of the AI lectures. The ML lectures felt like I was back in a classroom watching a professor go through some power point slides, adding handwritten notes as the lecture progressed. That isn&rsquo;t very engaging. The one-on-one style of the AI lectures was more engaging.</p>

<p>I enjoyed both the programming exercises of ML class and the exams in the AI class. Both added an interesting way of learning to their respective class.</p>

<h3>Recommendations</h3>

<p>If I were designing a course for myself, I found the short videos with many quiz questions style of lecturing to be the more effective style. I would offer homework in a fashion similar to the ML class. Submit as many times as you want, but with a minimum time between submissions. I would up that time to be at least one hour to minimize memorization of answers. My ideal class would also have both programming exercises and exams.</p>

<p>Both classes had some student run question and answer boards (similar to <a href="http://stackoverflow.com">stackoverflow</a>). This was alright but I would look into adding a type of forum that is more suited towards discussions. A Q&amp;A style board is not a great environment for having a discussion that is ordered by time. I think normal forums style with replies ordered by time would be effective and worth an experiment.</p>

<h3>Conclusion</h3>

<p>I greatly enjoyed taking these two Stanford classes. I think online lectures and homework were an extremely effective way of delivering information and reinforcing learning. I found taking these two classes to be a manageable amount of work. I did pretty much stop reading books while taking these classes and instead focused on watching lectures and doing homework. Had I only taken one class or spent breaks at work watching videos, I think I would have been able to maintain my other activities while taking these classes.</p>

<p>There are quite a few classes being offered at Stanford that start in the near future. Scroll to the bottom of <a href="http://www.ml-class.org/course/auth/index">this</a> page to take a look at what Stanford is offering starting in January. I would highly recommend taking a class. MIT also just announced <a href="http://web.mit.edu/newsoffice/2011/mitx-education-initiative-1219.html">MITx</a>. I haven&rsquo;t heard a ton of information about it, but it sounds similar and I look forward to its launch.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/16/continuous-testing-with-clojure-and-expectations/">Continuous testing with Clojure and expectations</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-12-16T09:30:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>16</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>9:30 am</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;ve recently started using <a href="http://jayfields.com/">Jay Fields'</a> Clojure testing library, <a href="https://github.com/jaycfields/expectations"><code>expectations</code></a>. I&rsquo;m not going to explain <code>expectations</code>, Jay already did a great job on his <a href="http://blog.jayfields.com/2011/11/clojure-expectations-introduction.html">blog</a>, but I will quote its <a href="https://github.com/jaycfields/expectations">Github</a> page.</p>

<blockquote><p>expectations is a minimalist&rsquo;s testing framework</p></blockquote>

<p>The above quote is absolutely true, which is one of the major reasons I&rsquo;m liking <code>expectations</code>. It hasn&rsquo;t been all sunshine though, when I first started using it I had a major problem. It slowed down my usual Clojure workflow.</p>

<p>Up until this point I had stuck to using <code>clojure.test</code>. Combined with emacs, slime, swank, and <code>clojure-test-mode</code> I found the time between making a change to code and running tests to be minimal.</p>

<p>When I switched to <code>expectations</code> the time it took between making a code change and running tests increased. With <code>expectations</code> I couldn&rsquo;t reevaluate my buffer to get the new tests in my repl environment. Doing so caused the new tests to be there along with the old tests. This meant I needed to switch to the command line to run my tests. This caused me to incur the startup costs of the jvm simply to run my expectations (tests). This was a huge cost compared to what I was used to before.</p>

<h2>Introducing <code>lein-autoexpect</code></h2>

<p>To fix my problem I wrote <a href="https://github.com/jakemcc/lein-autoexpect"><code>lein-autoexpect</code></a>. <code>lein-autoexpect</code> is a <a href="https://github.com/technomancy/leiningen/"><code>Leiningen</code></a> plugin that monitors a project&rsquo;s source and test directory and when a Clojure file changes it reloads the affected namespaces and runs all the expectations. Using this plugin my turn around time from modifying code to running all of my expectations is practically nothing. Without the cost of the jvm startup there is practically no time wasted between when code is saved and tests are run.</p>

<p>To use <code>lein-autoexpect</code> simply add <code>[lein-autoexpect "0.0.2"]</code> to your <code>project.clj</code> file and fetch the dependency. Then at the command line run <code>lein autoexpect</code>. You&rsquo;ll see your tests run and then it will just hang there, eagerly waiting for code to change.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>lein autoexpect
</span><span class='line'>*********************************************
</span><span class='line'>*************** Running tests ***************
</span><span class='line'>Ran <span class="m">3</span> tests containing <span class="m">3</span> assertions in <span class="m">16</span> msecs
</span><span class='line'><span class="m">0</span> failures, <span class="m">0</span> errors.
</span></code></pre></td></tr></table></div></figure>


<p>Next time you end up saving you&rsquo;ll see your tests run again and the following example output appears.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>*********************************************
</span><span class='line'>*************** Running tests ***************
</span><span class='line'>Ran <span class="m">4</span> tests containing <span class="m">4</span> assertions in <span class="m">3</span> msecs
</span><span class='line'><span class="m">0</span> failures, <span class="m">0</span> errors.
</span></code></pre></td></tr></table></div></figure>


<p><code>lein-autoexpect</code> tries to clearly delimit each test session with the banner made of <code>*</code>. This helps keep different runs separate when scrolling through your terminal.</p>

<p>This style of testing is called <a href="http://blog.objectmentor.com/articles/2007/09/20/continuous-testing-explained">continuous testing</a>. If you haven&rsquo;t tried it, I would highly recommend giving it a shot. Even just using it for the last few days changed how I think testing should be done.</p>

<p>Source can be found on <a href="https://github.com/jakemcc/lein-autoexpect">Github</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/07/25/utilities-i-like-autojump/">Utilities I like: autojump</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-07-25T00:00:00-05:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>12:00 am</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/joelthelion/autojump">autojump</a> is a nifty command line tool that enables quicker jumping between directories. I&rsquo;ve been using it for a few months now and miss it when I work other machines.</p>

<p>To jump to a directory you type <code>j SUBSTRING_OF_DIR</code>. Example:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span><span class="nb">pwd</span>
</span><span class='line'>/Users/jmccrary
</span><span class='line'><span class="nv">$ </span>j jake
</span><span class='line'>/Users/jmccrary/src/github/jakemcc/jakemccrary.com
</span><span class='line'><span class="nv">$ </span><span class="nb">pwd</span>
</span><span class='line'>/Users/jmccrary/src/github/jakemcc/jakemccrary.com
</span></code></pre></td></tr></table></div></figure>


<p>Above I jumped from my home directory to the root of this website&rsquo;s code. Being able to jump between directories by just remembering a name (or part of a name) is great. This frees me from having to remember full paths or set up aliases.</p>

<p>autojump works by keeping a database of &ldquo;time&rdquo; spent in directories and jumps to the most frequently visited one that match <code>SUBSTRING_OF_DIR</code>. If you are curious as to what that database looks like the tool <code>jumpstat</code> will give you a view.</p>

<p>I used to set up aliases for jumping between projects but now that I&rsquo;ve trained myself to use autojump I don&rsquo;t think I&rsquo;ll ever go back. Not having to do any extra work besides simply entering the root directory of new projects to setup efficient directory movement is great. I think that if you give it a shot for a while you&rsquo;ll find the same benefits.</p>

<p>If you are on a Mac and use <a href="https://github.com/mxcl/homebrew">homebrew</a> you can install by doing <code>brew install autojump</code>. For other platforms check out the <a href="https://github.com/joelthelion/autojump">github</a> page.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/06/28/a-simple-way-of-testing-disconnect-logic/">A simple way of testing disconnect logic</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-06-28T00:00:00-05:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>28</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>12:00 am</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m guessing that software you write connects to some other server. I&rsquo;m also guessing that how it handles disconnects is tested (if ever tested) by either killing the process it connects to or by pulling out your network cable. I recently stumbled across a nifty Linux command line tool that makes causing disconnects significantly easier.</p>

<p>This tool is <a href="http://linux.die.net/man/8/tcpkill">tcpkill</a>. To use <code>tcpkill</code> you specify an interface and a <a href="http://linux.die.net/man/8/tcpdump">tcpdump</a> style filter and it kills traffic on that interface that matches the filter.</p>

<p>For example, if your application has a connection to 192.168.1.130, then to force a disconnect you would execute <code>tcpkill -i eth0 host 192.168.1.130</code>.</p>

<p><code>tcpkill</code> can be used for more than forcing disconnects. It can also be used as a simple website filter. If <a href="http://stackoverflow.com">Stack Overflow</a> wastes too much of your time then you could simply leave <code>tcpkill -i eth0 host stackoverflow.com</code> running and enjoy your increased productivity.</p>

<p><code>tcpkill</code> is a pretty useful tool. If you want to install it in Ubuntu it is found in the dsniff package (<code>apt-get install dsniff</code>).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/04/12/command-line-arguments-in-clojure/">Command line arguments in Clojure</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-04-12T20:00:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>8:00 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p><em>This post is now out of date. The library recommended by this post is now a contrib library. Check out <a href="https://github.com/clojure/tools.cli">tools.cli</a> for great documentation about handling command line arguments in Clojure.</em></p>

<hr />

<p>Write enough Clojure and eventually you will need to handle command line arguments. There are numerous ways of doing this. Keep reading for a brief introduction to three.</p>

<h3>Using built-in features</h3>

<p>There exists a sequence named <code>*command-line-args*</code> which contains the arguments to your application. Using it is simple, it is just a sequence after all, and it is always available to you. No need to pull in external dependencies that others may not be familiar with.</p>

<p>This simplicity is also a downside. Because only a sequence is provided for you it is up to you to actually figure out the arguments. If you want to do any sort of verification that certain arguments are supplied you write the code that does the verifying. If you want to move away from positional arguments to using command line flags once again it is up to you to write it.</p>

<p>Because of the amount of code required to do any sort of advanced argument handling I tend to use <code>*command-line-args*</code> only for applications that take a single type of argument, for example a file path, and require one or more of this type of argument.</p>

<h3>Setup for next two sections</h3>

<p>For the next two sections I&rsquo;m using version 1.5.0 of Leiningen and the specified versions of libraries as stated in the below <code>project.clj</code> file.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">blogpost</span> <span class="s">&quot;1.0.0-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.2.0&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">org.clojure/clojure-contrib</span> <span class="s">&quot;1.2.0&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">clargon</span> <span class="s">&quot;1.0.0&quot;</span><span class="p">]]</span>
</span><span class='line'>  <span class="ss">:dev-dependencies</span> <span class="p">[[</span><span class="nv">swank-clojure</span> <span class="s">&quot;1.2.1&quot;</span><span class="p">]]</span>
</span><span class='line'>  <span class="ss">:run-aliases</span> <span class="p">{</span><span class="ss">:clargon</span> <span class="nv">clargon-example</span>
</span><span class='line'>                <span class="ss">:cc</span> <span class="nv">command-line-example</span><span class="p">})</span>
</span></code></pre></td></tr></table></div></figure>


<p>I&rsquo;m using <code>lein run</code> to run the examples. <code>lein run :cc</code> runs the clojure.contrib example. Likewise, running <code>lein run :clargon</code> will run the clargon examples. Both of these commands can be followed by additional arguments that get passed to the application.</p>

<h3>Using clojure.contrib.command-line</h3>

<p>The next step after using <code>*command-line-args*</code> is to use the library <code>clojure.contrib.command-line</code>. This library provides the function <code>with-command-line</code> that allows you specify requirements and then handles the parsing of the command line arguments for you.</p>

<p>Positives of using <code>clojure.contrib.command-line</code>:
* Part of <code>clojure.contrib</code>. Probably extremely low friction to start using it.
* No longer need to write your own command line parsing code.
* Responds to <code>-h</code> and <code>--help</code>.</p>

<p>A negative of using <code>clojure.contrib.command-line</code> is that the documentation is pretty sparse. This can lead to some fumbling around as you learn how to use it. Another downside is that there isn&rsquo;t a way of specifying whether an argument is required or optional. This means you must manually check for required arguments and give appropriate error messages to the user.</p>

<p>Below is an example of using <code>clojure.contrib.command-line</code>. It specifies a few different arguments. The <code>--cow</code> argument has a default value of &ldquo;cow&rdquo;. <code>--chicken</code> has no default value, if it is left unspecified it will be <code>nil</code>. The line with <code>milk?</code> specifies a boolean value. If <code>--milk</code> (or <code>-m</code> because of the <code>m?</code> specification) is specified at the command line then <code>milk?</code> will be true. <code>extras</code> will collect any additional arguments.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">command-line-example</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.contrib.command-line</span> <span class="ss">:as</span> <span class="nv">ccl</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">-main</span> <span class="p">[</span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">ccl/with-command-line</span> <span class="nv">args</span>
</span><span class='line'>    <span class="s">&quot;Command line demo&quot;</span>
</span><span class='line'>    <span class="p">[[</span><span class="nv">cow</span> <span class="s">&quot;This is the cows name&quot;</span> <span class="s">&quot;cow&quot;</span><span class="p">]</span>
</span><span class='line'>     <span class="p">[</span><span class="nv">chicken</span> <span class="s">&quot;This specifies the chickens name&quot;</span><span class="p">]</span>
</span><span class='line'>     <span class="p">[</span><span class="nv">milk?</span> <span class="nv">m?</span> <span class="s">&quot;Should you milk the cow?&quot;</span><span class="p">]</span>
</span><span class='line'>     <span class="nv">extras</span><span class="p">]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="s">&quot;cow&#39;s name: &quot;</span> <span class="nv">cow</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="s">&quot;chicken&#39;s name: &quot;</span> <span class="nv">chicken</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="s">&quot;milk?: &quot;</span> <span class="nv">milk?</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="s">&quot;extra args: &quot;</span> <span class="nv">extras</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>And here is an example of calling that <code>-main</code> function from the repl.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>lein run :cc --cow Herb --milk other args
</span><span class='line'>cow<span class="s1">&#39;s name:  Herb</span>
</span><span class='line'><span class="s1">chicken&#39;</span>s name:  nil
</span><span class='line'>milk?:  <span class="nb">true</span>
</span><span class='line'>extra args:  <span class="o">[</span>other args<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Using some other library</h3>

<p>Another option is to use some library that isn&rsquo;t found in <code>clojure.contrib</code>. One example of this is <a href="https://github.com/gar3thjon3s/clargon">clargon</a>. Clargon is a library that <a href="http://blog.gaz-jones.com/">Gaz Jones</a> (his blog post <a href="http://blog.gaz-jones.com/post/2528825514/command-line-applications-in-clojure">here</a>) wrote. The documentation (both in his blog post and through the github page and tests) is the primary reason I started using it.</p>

<p>Pros of clargon:
* Great documentation. Makes it quick to get started.
* Can specify functions to transform arguments prior to gaining access to them
* You specify if an argument is required or optional.
* Responds to <code>-h</code> and <code>--help</code>.</p>

<p>One potential negative of using clargon is that it isn&rsquo;t a <code>clojure.contrib</code> library. This means there is slightly more friction to start using it on your project as, unlike <code>clojure.contrib</code>, you are probably not already depending on it.</p>

<p>Below is an example similar to the above <code>clojure.contrib.command-line</code> example. One important difference is that some arguments are now specified as either required or optional. If a required argument is not specified then an error is printed and execution stops.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">clargon-example</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clargon.core</span> <span class="ss">:as</span> <span class="nv">c</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">-main</span>
</span><span class='line'>  <span class="p">[</span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">opts</span>
</span><span class='line'>        <span class="p">(</span><span class="nf">c/clargon</span>
</span><span class='line'>         <span class="nv">args</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">c/optional</span> <span class="p">[</span><span class="s">&quot;--cow&quot;</span> <span class="s">&quot;Specify the cow&#39;s name&quot;</span> <span class="ss">:default</span> <span class="s">&quot;cow&quot;</span><span class="p">])</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">c/required</span> <span class="p">[</span><span class="s">&quot;--chicken&quot;</span> <span class="s">&quot;Chicken&#39;s name&quot;</span><span class="p">])</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">c/optional</span> <span class="p">[</span><span class="s">&quot;-m?&quot;</span> <span class="s">&quot;--milk?&quot;</span> <span class="s">&quot;should you milk the cow?&quot;</span><span class="p">]))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="nv">args</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="nv">opts</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>optional</code> and <code>required</code> both take a vector that defines the specification of a flag. Starting with the first element in that vector, each element that is a string and starts with a &lsquo;-&rsquo; is considered a potential flag for that argument. The last flag is stripped of leading &lsquo;-&rsquo; characters and is considered the name of that flag (unless a <code>:name</code> option is specified later). The name is used to look up the value of the argument in the option map that is returned by the <code>clargon</code> function. If the next element after the last flag is a string then it is considered the documentation for that flag. When clargon runs into a non-string element then it and everything after it are considered options and should be specified as key value pairs. Options that do something are <code>:default</code>, <code>:name</code>, and <code>:required</code>.</p>

<p><code>optional</code> and <code>required</code> both can take a function as a second argument. This function will be passed the argument for that flag and should return a transformed version of it. Below is an example using this functionality to specify a required flag that takes a comma separated list of files. These comma separated files are split apart and stuck into a vector.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">clargon-example</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clargon.core</span> <span class="ss">:as</span> <span class="nv">c</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">-main</span>
</span><span class='line'>  <span class="p">[</span><span class="o">&amp;</span> <span class="nv">args</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">opts</span> <span class="p">(</span><span class="nf">c/clargon</span>
</span><span class='line'>              <span class="nv">args</span>
</span><span class='line'>              <span class="p">(</span><span class="nf">c/required</span> <span class="p">[</span><span class="s">&quot;--files&quot;</span> <span class="s">&quot;Files to process&quot;</span><span class="p">]</span>
</span><span class='line'>                          <span class="o">#</span><span class="p">(</span><span class="nf">vec</span> <span class="p">(</span><span class="nf">.split</span> <span class="nv">%</span> <span class="s">&quot;,&quot;</span><span class="p">))))]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">println </span><span class="s">&quot;Parsed opts: &quot;</span> <span class="nv">opts</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Below is the above example being ran.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="nv">$</span> <span class="nv">lein</span> <span class="nv">run</span> <span class="ss">:clargon</span> <span class="nv">--files</span> <span class="nv">one.txt</span>,<span class="nv">two.txt</span>,<span class="nv">three.txt</span>
</span><span class='line'><span class="nv">Parsed</span> <span class="nv">opts</span><span class="err">:</span>  <span class="p">{</span><span class="ss">:files</span> <span class="p">[</span><span class="nv">one.txt</span> <span class="nv">two.txt</span> <span class="nv">three.txt</span><span class="p">]}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Clargon supports some more advanced nested argument handling that I&rsquo;m not going to go into here. If you want to know more about clargon I&rsquo;d recommend reading reading Gaz&rsquo;s <a href="http://blog.gaz-jones.com/post/2528825514/command-line-applications-in-clojure">blog post</a> and the <a href="https://github.com/gar3thjon3s/clargon">clargon</a> readme and tests.</p>

<h3>End</h3>

<p>There are many more ways to handle command line parsing in Clojure. You are not limited to any of the three above. I&rsquo;ve personally found clargon to hit all of my needs and plan on continuing to use it.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/19/creating-sql-table-with-composite-key-in-clojure/">Creating a SQL table with a composite primary key in Clojure</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2011-01-19T00:00:00-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>19</span><span class='date-suffix'>th</span>, <span class='date-year'>2011</span></span> <span class='time'>12:00 am</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I was interacting with a SQL database using Clojure and needed to create a table so I turned to <code>create-table</code> from <a href="http://clojure.github.com/clojure-contrib/sql-api.html">clojure.contrib.sql</a>. Looking at the <a href="http://clojure.github.com/clojure-contrib/sql-api.html#clojure.contrib.sql/create-table">docs</a> for <code>create-table</code> it seemed pretty straight forward. To create a table with columns <em>date</em>, <em>id</em>, <em>symbol</em>, <em>price</em>, and <em>quantity</em> you would write the following.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">create-table</span> <span class="s">&quot;orders&quot;</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:date</span>     <span class="s">&quot;date&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:id</span>       <span class="s">&quot;integer&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:symbol</span>   <span class="s">&quot;char(10)&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:price</span>    <span class="s">&quot;integer&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:quantity</span> <span class="s">&quot;integer&quot;</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above works. I also wanted to specify that columns <em>date</em> and <em>id</em> to form a composite primary key. I wasn&rsquo;t sure how to specify a composite primary key with <code>create-table</code> and ended up diving into its <a href="https://github.com/clojure/clojure-contrib/blob/b8d2743d3a89e13fc9deb2844ca2167b34aaa9b6/src/main/clojure/clojure/contrib/sql.clj#L103">code</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">create-table</span>
</span><span class='line'>  <span class="s">&quot;Creates a table on the open database connection given a table name and</span>
</span><span class='line'><span class="s">  specs. Each spec is either a column spec: a vector containing a column</span>
</span><span class='line'><span class="s">  name and optionally a type and other constraints, or a table-level</span>
</span><span class='line'><span class="s">  constraint: a vector containing words that express the constraint. All</span>
</span><span class='line'><span class="s">  words used to describe the table may be supplied as strings or keywords.&quot;</span>
</span><span class='line'>  <span class="p">[</span><span class="nb">name </span><span class="o">&amp;</span> <span class="nv">specs</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">do-commands</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;CREATE TABLE %s (%s)&quot;</span>
</span><span class='line'>           <span class="p">(</span><span class="nf">as-str</span> <span class="nv">name</span><span class="p">)</span>
</span><span class='line'>           <span class="p">(</span><span class="nb">apply str </span>
</span><span class='line'>             <span class="p">(</span><span class="nb">map </span><span class="nv">as-str</span>
</span><span class='line'>              <span class="p">(</span><span class="nb">apply concat </span>
</span><span class='line'>               <span class="p">(</span><span class="nf">interpose</span> <span class="p">[</span><span class="s">&quot;, &quot;</span><span class="p">]</span>
</span><span class='line'>                <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="nb">partial </span><span class="nv">interpose</span> <span class="s">&quot; &quot;</span><span class="p">)</span> <span class="nv">specs</span><span class="p">))))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Looking at <code>create-table</code> we can see it creates a SQL statement which is then executed by <code>do-commands</code>. In order to have a composite key we need <code>do-commands</code> to execute a SQL statement that looks similar to below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">track</span><span class="p">(</span>
</span><span class='line'>  <span class="nb">date</span> <span class="nb">date</span><span class="p">,</span>
</span><span class='line'>  <span class="n">id</span> <span class="nb">integer</span><span class="p">,</span>
</span><span class='line'>  <span class="n">symbol</span> <span class="nb">char</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
</span><span class='line'>  <span class="n">price</span> <span class="nb">integer</span><span class="p">,</span>
</span><span class='line'>  <span class="n">quantity</span> <span class="nb">integer</span><span class="p">,</span>
</span><span class='line'>  <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="p">(</span><span class="nb">date</span><span class="p">,</span> <span class="n">id</span><span class="p">)</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Let&rsquo;s break down <code>create-table</code> to figure out what we need to pass it to make <code>do-commands</code> run the above statement. The code for <code>create-table</code> is repeated below with comments pointing out what step lines up the code.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">create-table</span>
</span><span class='line'>  <span class="p">[</span><span class="nb">name </span><span class="o">&amp;</span> <span class="nv">specs</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">do-commands</span>                                              <span class="c1">; step 7</span>
</span><span class='line'>   <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;CREATE TABLE %s (%s)&quot;</span>                           <span class="c1">; step 6</span>
</span><span class='line'>           <span class="p">(</span><span class="nf">as-str</span> <span class="nv">name</span><span class="p">)</span>
</span><span class='line'>           <span class="p">(</span><span class="nb">apply str </span>                                      <span class="c1">; step 5</span>
</span><span class='line'>             <span class="p">(</span><span class="nb">map </span><span class="nv">as-str</span>                                    <span class="c1">; step 4</span>
</span><span class='line'>              <span class="p">(</span><span class="nb">apply concat </span>                                <span class="c1">; step 3</span>
</span><span class='line'>               <span class="p">(</span><span class="nf">interpose</span> <span class="p">[</span><span class="s">&quot;, &quot;</span><span class="p">]</span>                            <span class="c1">; step 2</span>
</span><span class='line'>                <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="nb">partial </span><span class="nv">interpose</span> <span class="s">&quot; &quot;</span><span class="p">)</span> <span class="nv">specs</span><span class="p">))))))))</span>  <span class="c1">; step 1</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>First <code>create-table</code> takes the sequences in <code>specs</code> and puts a space between each element in each sequence.</li>
<li>The result of step 1 then has a vector containing a comma and a space interposed between each element of it.</li>
<li><code>concat</code> combined with <code>apply</code> is used to combine each element of the result of step 2 into a single sequence.</li>
<li><code>as-str</code> (from <a href="http://clojure.github.com/clojure-contrib/string-api.html#clojure.contrib.string/as-str">c.c.string</a>) is mapped over the result of step 3 to make sure every element is a string.</li>
<li><code>str</code> is used to make one string out of the sequence of strings from step 4.</li>
<li><code>format</code> is used to substitute in <code>name</code> and the result of step 5 to create the SQL statement.</li>
<li><code>do-commands</code> executes the statement created in step 6.</li>
</ol>


<p>Knowing how <code>create-table</code> works now allows us to specify the arguments that will create the orders table with the composite primary key of <em>date</em> and <em>id</em>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="nf">create-table</span> <span class="s">&quot;orders&quot;</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:date</span>     <span class="s">&quot;date&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:id</span>       <span class="s">&quot;integer&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:symbol</span>   <span class="s">&quot;char(10)&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:price</span>    <span class="s">&quot;integer&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="ss">:quantity</span> <span class="s">&quot;integer&quot;</span><span class="p">]</span>
</span><span class='line'>              <span class="p">[</span><span class="s">&quot;PRIMARY KEY&quot;</span> <span class="s">&quot;(date, id)&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog//11">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog//9">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2020/10/03/go-create-silly-small-programs/">Go create silly, small programs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/08/31/utilities-i-like-selecta/">Utilities I like: selecta</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/07/03/introducing-photo-fit/">Introducing Photo Fit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/06/28/using-bazel-to-help-fix-flaky-tests/">Using Bazel to help fix flaky tests</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/05/04/how-to-be-alerted-when-a-long-running-process-finishes/">How to be automatically notified when long running processes finish</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/04/26/hanging-a-hangboard-using-a-doorway-pull-up-bar/">How to hang a hangboard using a doorway pull-up bar</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/04/21/using-bash-preexec-for-monitoring-the-runtime-of-your-last-command/">Using Bash-Preexec for monitoring the runtime of your last command</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/03/16/a-retrospective-format/">A retrospective format for remote or co-located teams</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/03/10/more-working-from-home-tips/">More working from home tips</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/02/25/auto-syncing-a-git-repository/">Auto-syncing a git repository</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Subscribe</h1>
  <p>Looking forward to reading more of my writing?</p>
  <p>Sign up for my <a target="_blank" href="https://jakemccrary.substack.com/welcome">newsletter</a> to get periodic emails with links to my latest writing and other thoughts.</p>
  <p>Can't wait for the infrequent newsletter? Subscribe to the <a href="http://feeds.feedburner.com/JakeMccrarysMusings">RSS</a> feed.</p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="/disclosure-policy">Disclosure Policy</a><br/>
  <a href="//www.iubenda.com/privacy-policy/509351" class="iubenda-nostyle iub-legal-only iubenda-embed" title="Privacy Policy">Privacy Policy</a><br/>
<script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src = "//cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
  Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
</p>


</footer>
  


</body>
</html>
