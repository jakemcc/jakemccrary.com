
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="iem7"><![endif]-->
<!--[if lt IE 9]><html class="lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Jake McCrary</title>
    <meta name="author" content="Jake McCrary">

    
    
    
    

    <meta itemprop="name" content="Jake McCrary" />
    <meta itemprop="description" content=" lein-test-refresh has
always supported notifying you of your tests' status through growl.
With the release of version 0.3.4 it now will notify you &hellip;" />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jakemcc" />
    <meta name="twitter:title" content="Jake McCrary" />
    <meta name="twitter:description" content=" lein-test-refresh has
always supported notifying you of your tests' status through growl.
With the release of version 0.3.4 it now will notify you &hellip;" />
    <meta name="twitter:creator" content="@jakemcc" />
    <meta name="twitter:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />

    <!-- Open Graph data -->
    <meta property="og:site_name" content="Writing by Jake McCrary" />
    <meta property="og:url" content="https://jakemccrary.com/blog/10/" />
    <meta property="og:title" content="Jake McCrary" />
    <meta property="og:description" content=" lein-test-refresh has
always supported notifying you of your tests' status through growl.
With the release of version 0.3.4 it now will notify you &hellip;" />
    <meta property="og:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />
    
    

    <meta name="description" content=" lein-test-refresh has
always supported notifying you of your tests' status through growl.
With the release of version 0.3.4 it now will notify you &hellip;">

    

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://jakemccrary.com/blog/10/">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/print.css" media="print" rel="stylesheet" type="text/css">
    <link href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="alternate" title="Jake McCrary" type="application/atom+xml">
    <link href="https://jakemccrary.com/feed.json" rel="alternate" title="Jake McCrary" type="application/json">

    <!-- iOS scaling bug fix Rewritten version By @mathias, @cheeaun and @jdalton Source url: https://gist.github.com/901295 -->
    <script type="text/javascript">
     (function(doc) {
       var addEvent = 'addEventListener',
           type = 'gesturestart',
           qsa = 'querySelectorAll',
           scales = [1, 1],
           meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];
       function fix() {
         meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
         doc.removeEventListener(type, fix, true);
       }
       if ((meta = meta[meta.length - 1]) && addEvent in doc) {
         fix();
         scales = [0.25, 1.6];
         doc[addEvent](type, fix, true);
       }
     }(document));
    </script>
  </head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Jake McCrary</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul role=main-navigation>
  <li><a href="/">Articles</a></li>
  <li><a href="/adventures/">Adventures</a></li>
  <li><a href="/about.html">About</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
  <li><a href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  <li><a href="https://jakemccrary.substack.com/welcome" target="_blank" rel="subscribe-email" title="subscribe via email">Newsletter</a></li>
</ul>

  <form action="https://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="sitesearch" value="jakemccrary.com">
      <input class="search" type="text" name="q" placeholder="Search"/>
    </fieldset>
  </form>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/02/flexible-notification-of-clojure-tests-failing/">Flexible notification of Clojure tests failing</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-02-02T18:11:00-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2014</span></span> <span class='time'>6:11 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> has
always supported notifying you of your tests' status through growl.
With the release of version 0.3.4 it now will notify you using
whatever program you want.</p>

<p>To make my Mac whisper my the results of running my tests I can use
the following project.clj</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">sample</span> <span class="s">&quot;1.2.3&quot;</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.5.1&quot;</span><span class="p">]]</span>
</span><span class='line'>  <span class="ss">:profiles</span> <span class="p">{</span><span class="ss">:dev</span> <span class="p">{</span><span class="ss">:plugins</span> <span class="p">[[</span><span class="nv">com.jakemccrary/lein-test-refresh</span> <span class="s">&quot;0.3.4&quot;</span><span class="p">]]}}</span>
</span><span class='line'>  <span class="ss">:test-refresh</span> <span class="p">{</span><span class="ss">:notify-command</span> <span class="p">[</span><span class="s">&quot;say&quot;</span> <span class="s">&quot;-v&quot;</span> <span class="s">&quot;Whisper&quot;</span><span class="p">]})</span>
</span></code></pre></td></tr></table></div></figure>


<p>The specification of the command is found in the <code>:test-refresh
{:notify-command ["say" "-v" "Whisper"]}</code> entry in the above
project.clj. After running your tests
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> will
pass a (usually) short summary message as the final parameter to the
specified command.</p>

<p>Now you can finally have the results of running
your tests whispered to you.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/12/releasing-lein-test-refresh-0-dot-3-0/">Releasing lein-test-refresh 0.3.0</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-12T20:12:00-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:12 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>At the suggestion of my coworker <a href="http://www.xpteam.com/">Jeff Bay</a>
you can now hit a single keystroke to cause
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> to
rerun your tests. Now you can hit enter in the terminal running <code>lein
test-refresh</code> to cause your tests to be run.</p>

<p>Add the below text to your project.clj to start using
<code>lein-test-refresh</code> today.
<img src="https://clojars.org/com.jakemccrary/lein-test-refresh/latest-version.svg" alt="Clojars generated dependency vector" /></p>

<p>As a reminder if you call you can pass the argument <code>:growl</code> to
lein-test-refresh. If you pass <code>:growl</code> as an argument then you&rsquo;ll be
notified of test success and failures through
<a href="http://growl.info/">growl</a>. On top of the quick feedback cycles that
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> (and
<a href="https://github.com/jakemcc/lein-autoexpect">lein-autoexpect</a>)
provides the growl notification is my favorite feature. I&rsquo;d highly
recommend giving it a shot.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/01/using-incanter-to-review-my-2013-reading/">Using Incanter to review my 2013 reading</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-01T17:31:00-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>5:31 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I use <a href="https://goodreads.com">goodreads</a> to keep track of
<a href="https://www.goodreads.com/user/show/3431614-jake-mccrary">my reading</a>
and have since early 2010. I find very useful for capturing what I
want to read and reminding me of how I felt about books I&rsquo;ve read. I
thought it would be fun to take a closer look at what I read in 2013.
I&rsquo;m doing this using <a href="http://clojure.org/">Clojure</a> with
<a href="http://incanter.org/">Incanter</a>. I haven&rsquo;t used Incanter since I
wrote
<a href="http://jakemccrary.com/blog/2010/02/21/plotting-time-series-data-with-incanter/">this</a>
post and thought this would be a good opportunity to visit it again.</p>

<p>First I need to get my data out of goodreads. I&rsquo;ve worked with the
Goodreads API before <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> but am not going to use it for this
exercise. Instead I&rsquo;m using the goodreads export functionality (at
goodreads follow the links: My Books > import/export) to export a csv
file. Having the csv file also lets me cleanup some of the data since
some of the book&rsquo;s page counts were missing <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>.</p>

<p>Now that I have data it is time to start playing with it. Run <code>lein new goodreads-summary</code> and edit the <code>project.clj</code> file to have a dependency on Incanter.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">goodreads-summary</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.5.1&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">org.clojure/data.csv</span> <span class="s">&quot;0.1.2&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">incanter</span> <span class="s">&quot;1.5.4&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">clj-time</span> <span class="s">&quot;0.6.0&quot;</span><span class="p">]])</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next I&rsquo;m going to take the csv file and transform it into an Incanter
dataset. This is easily done with
<a href="http://liebke.github.io/incanter/io-api.html#incanter.io/read-dataset">incanter.io/read-dataset</a>.
It isn&rsquo;t well documented but by passing <code>:keyword-headers false</code> to
<code>read-dataset</code> the headers from the csv are not converted to keywords.
I&rsquo;m doing this because some of the goodreads headers contain spaces
and dealing with spaces in keywords is a pain. The snippet below has
all of the necessary requires for the remainder of the examples.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">goodreads-summary.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.data.csv</span> <span class="ss">:as</span> <span class="nv">csv</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">clojure.string</span> <span class="ss">:as</span> <span class="nv">str</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">incanter.core</span> <span class="ss">:as</span> <span class="nv">incanter</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">incanter.io</span> <span class="ss">:as</span> <span class="nv">io</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">incanter.charts</span> <span class="ss">:as</span> <span class="nv">charts</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">clj-time.core</span> <span class="ss">:as</span> <span class="nv">tc</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">clj-time.format</span> <span class="ss">:as</span> <span class="nv">tf</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">read-csv</span> <span class="p">[</span><span class="nv">filepath</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">io/read-dataset</span> <span class="nv">filepath</span> <span class="ss">:header</span> <span class="nv">true</span> <span class="ss">:keyword-headers</span> <span class="nv">false</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Calling <code>read-csv</code> with the path to the exported goodreads data
results in dataset. If you want to view the data use
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/view">incanter.core/view</a>.
Running <code>(incanter/view (read-csv "goodreads_export.csv"))</code> pops up a
grid of with all the data. I don&rsquo;t care about most of the columns so
lets define a function that selects out the few I care about.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">select-columns</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/sel</span> <span class="nv">dataset</span> <span class="ss">:cols</span> <span class="p">[</span><span class="s">&quot;Number of Pages&quot;</span> <span class="s">&quot;Date Read&quot;</span> <span class="s">&quot;Bookshelves&quot;</span> <span class="s">&quot;Exclusive Shelf&quot;</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Selecting columns is done with
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/sel">incanter.core/sel</a>.
Like most Incanter functions it has many overloads. One way to use it
is to pass a dataset with a vector of columns you want to select.</p>

<p>Filtering a dataset is done using
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/$where">incanter.core/$where</a>.
Goodreads has three default shelves <strong>to-read</strong>,
<strong>currently-reading</strong>, and <strong>read</strong>. To select all your read books you
filter of the <strong>Exclusive Shelf</strong> column for <strong>read</strong> books.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">finished</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/$where</span> <span class="p">{</span><span class="s">&quot;Exclusive Shelf&quot;</span> <span class="s">&quot;read&quot;</span><span class="p">}</span> <span class="nv">dataset</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Filtering for books read in 2013 is a bit more complicated. First I
convert the <strong>Date Read</strong> column from a string to a
<code>org.joda.time.DateTime</code>. This is done with the combination of
<code>transform-date-read-column</code> and <code>parse-date</code>. Some of the my data is missing a <strong>Date Read</strong> value. I&rsquo;m choosing to handle this by treating missing data as the result of <code>(clj-time.core/date-time 0)</code>.</p>

<p>The <code>$where</code> in <code>books-read-in-2013</code> is a bit more complicated than
the filtering in <code>finished</code>. Here I&rsquo;m providing a predicate to
use instead of just doing an equality comparison.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">parse-date</span> <span class="p">[</span><span class="nv">date-str</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">if </span><span class="nv">date-str</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">tf/parse</span> <span class="p">(</span><span class="nf">tf/formatter</span> <span class="s">&quot;yyyy/MM/dd&quot;</span><span class="p">)</span> <span class="nv">date-str</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">tc/date-time</span> <span class="mi">0</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">transform-date-read-column</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/transform-col</span> <span class="nv">dataset</span> <span class="s">&quot;Date Read&quot;</span> <span class="nv">parse-date</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">date-greater-than-pred</span> <span class="p">[</span><span class="nv">date</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">challenger</span><span class="p">]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nf">.compareTo</span> <span class="nv">challenger</span> <span class="nv">date</span><span class="p">)</span> <span class="mi">0</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">books-read-in-2013</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">finished</span> <span class="p">(</span><span class="nf">finished</span> <span class="p">(</span><span class="nf">select-columns</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">with-dates</span> <span class="p">(</span><span class="nf">incanter/$where</span> <span class="p">{</span><span class="s">&quot;Date Read&quot;</span> <span class="p">{</span><span class="ss">:fn</span> <span class="nv">identity</span><span class="p">}}</span> <span class="nv">finished</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">with-date-objects</span> <span class="p">(</span><span class="nf">transform-date-read-column</span> <span class="nv">with-dates</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">incanter/$where</span> <span class="p">{</span><span class="s">&quot;Date Read&quot;</span> <span class="p">{</span><span class="ss">:fn</span> <span class="p">(</span><span class="nf">date-greater-than-pred</span> <span class="p">(</span><span class="nf">parse-date</span> <span class="s">&quot;2012/12/31&quot;</span><span class="p">))}}</span>
</span><span class='line'>                     <span class="nv">with-date-objects</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we have a dataset that that contains only books read in 2013
(well, until I read a book in 2014 and the filter above also grabs
books in 2014). Now to generate some analytic for each month. First
lets add a <strong>Month</strong> column to our data. Originally I wrote the
function below. It uses <code>incanter.core/$map</code> to generate the data,
makes a dataset with the new data, and then adds that to the original
dataset.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">add-month-read-column</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">month-read</span> <span class="p">(</span><span class="nf">incanter/$map</span> <span class="nv">tc/month</span> <span class="s">&quot;Date Read&quot;</span> <span class="nv">dataset</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">month-dataset</span> <span class="p">(</span><span class="nf">incanter/dataset</span> <span class="p">[</span><span class="s">&quot;Month&quot;</span><span class="p">]</span> <span class="nv">month-read</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">with-month-read</span> <span class="p">(</span><span class="nf">incanter/conj-cols</span> <span class="nv">dataset</span> <span class="nv">month-dataset</span><span class="p">)]</span>
</span><span class='line'>    <span class="nv">with-month-read</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>When I wrote the above code it seemed like there should be a better
way. While writing this post I stumbled across
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/add-derived-column">incanter.core/add-derived-column</a>.
Switching to <code>add-derived-column</code> makes <code>add-month-read-column</code> almost trivial.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">add-month-read-column</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/add-derived-column</span> <span class="s">&quot;Month&quot;</span> <span class="p">[</span><span class="s">&quot;Date Read&quot;</span><span class="p">]</span> <span class="nv">tc/month</span> <span class="nv">dataset</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now that we have <code>add-month-read-column</code>  we can now start aggregating
some stats. Lets write code for calculating the pages read per month.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">pages-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">with-month-read</span> <span class="p">(</span><span class="nf">add-month-read-column</span> <span class="nv">dataset</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nf">incanter/$rollup</span> <span class="ss">:sum</span> <span class="s">&quot;Number of Pages&quot;</span> <span class="s">&quot;Month&quot;</span> <span class="nv">with-month-read</span><span class="p">)</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">incanter/$order</span> <span class="s">&quot;Month&quot;</span> <span class="ss">:asc</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>That was pretty easy. Lets write a function to count the number of books read per month.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">book-count-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">with-month-read</span> <span class="p">(</span><span class="nf">add-month-read-column</span> <span class="nv">dataset</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nf">incanter/$rollup</span> <span class="ss">:count</span> <span class="s">&quot;Number of books&quot;</span> <span class="s">&quot;Month&quot;</span> <span class="nv">with-month-read</span><span class="p">)</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">incanter/$order</span> <span class="s">&quot;Month&quot;</span> <span class="ss">:asc</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>pages-by-month</code> and <code>book-count-by-month</code> are very similar. Each uses <a href="http://liebke.github.io/incanter/core-api.html#incanter.core/$rollup">incanter.core/$rollup</a> to calculate per month stats. The first argument to <code>$rollup</code> can be a function that takes a sequence of values or one of the supported magical &ldquo;function identifier keywords&rdquo;.</p>

<p>Next lets combine the data together so we can print out a nice table. While we are at it lets add another column.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">stats-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nf">incanter/$join</span> <span class="p">[</span><span class="s">&quot;Month&quot;</span> <span class="s">&quot;Month&quot;</span><span class="p">]</span>
</span><span class='line'>                     <span class="p">(</span><span class="nf">pages-by-month</span> <span class="nv">dataset</span><span class="p">)</span>
</span><span class='line'>                     <span class="p">(</span><span class="nf">book-count-by-month</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">incanter/rename-cols</span> <span class="p">{</span><span class="s">&quot;Number of Pages&quot;</span> <span class="s">&quot;Page Count&quot;</span>
</span><span class='line'>                              <span class="s">&quot;Number of books&quot;</span> <span class="s">&quot;Book Count&quot;</span><span class="p">})</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">incanter/add-derived-column</span> <span class="s">&quot;Pages/Books&quot;</span>
</span><span class='line'>                                  <span class="p">[</span><span class="s">&quot;Page Count&quot;</span> <span class="s">&quot;Book Count&quot;</span><span class="p">]</span>
</span><span class='line'>                                  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">p</span> <span class="nv">b</span><span class="p">]</span> <span class="p">(</span><span class="nf">Math/round</span> <span class="p">(</span><span class="nb">double </span><span class="p">(</span><span class="nb">/ </span><span class="nv">p</span> <span class="nv">b</span><span class="p">)))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>stats-by-month</code> returns a dataset which when printed looks like the following table. It joins the data, renames columns, and adds a derived column.</p>

<pre><code>| Month | Book Count | Page Count | Pages/Books |
|-------+------------+------------+-------------|
|     1 |          6 |       1279 |         213 |
|     2 |          2 |       1251 |         626 |
|     3 |          8 |       2449 |         306 |
|     4 |          5 |       1667 |         333 |
|     5 |          6 |       2447 |         408 |
|     6 |          5 |       1609 |         322 |
|     7 |          5 |       1445 |         289 |
|     8 |          5 |       2229 |         446 |
|     9 |          2 |        963 |         482 |
|    10 |          5 |       1202 |         240 |
|    11 |          5 |       2248 |         450 |
|    12 |          7 |       1716 |         245 |
</code></pre>

<p>Great. Now we have a little ascii table. Lets get graphical and make some bar charts.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">chart-column-by-month</span> <span class="p">[</span><span class="nv">column</span> <span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nb">select </span><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">column</span><span class="p">]</span> <span class="p">(</span><span class="nf">incanter/sel</span> <span class="nv">dataset</span> <span class="ss">:cols</span> <span class="nv">column</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">months</span> <span class="p">(</span><span class="nb">select </span><span class="s">&quot;Month&quot;</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">charts/bar-chart</span> <span class="nv">months</span> <span class="p">(</span><span class="nb">select </span><span class="nv">column</span><span class="p">)</span>
</span><span class='line'>                      <span class="ss">:y-label</span> <span class="nv">column</span> <span class="ss">:x-label</span> <span class="s">&quot;Month&quot;</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">chart-page-count-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">chart-column-by-month</span> <span class="s">&quot;Page Count&quot;</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">chart-book-count-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">chart-column-by-month</span> <span class="s">&quot;Book Count&quot;</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">view-page-count-chart</span> <span class="p">[]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">-&gt; </span><span class="p">(</span><span class="nf">read-csv</span> <span class="s">&quot;goodreads_export.csv&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="nv">books-read-in-2013</span>
</span><span class='line'>      <span class="nv">stats-by-month</span>
</span><span class='line'>      <span class="nv">chart-page-count-by-month</span>
</span><span class='line'>      <span class="nv">incanter/view</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Running the snippet <code>view-page-count-chart</code> produces a pop-up with the
below bar chart. The chart actually surprises me as I fully expected
to have higher page counts during the winter months than the summer
months. This chart and analysis is pretty useless though without
knowing the difficulty of the pages read. For example, last February I
read
<a href="http://www.amazon.com/gp/product/0316920045/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0316920045&amp;linkCode=as2&amp;tag=jakemccrary08-20&amp;linkId=RTXH5NFJLAODUEBP">Infinite Jest</a>.
Knowing that I don&rsquo;t feel like having a low page count in that month
is slacking at all.</p>

<p><img src="/images/page-count-by-month.png" title="Bar chart of total page count by month" alt="Bar chart of total page count by month" /></p>

<h3>2013 Summary</h3>

<p>2013 was a pretty big year of reading. I read more books this past
year than all other years that I have data. I also read some of the
best books I&rsquo;ve ever read. Not only that but I actually created
multiple <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> custom Kindle dictionaries to help improve my (and
others) reading experience.</p>

<p>Summary table <sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>:</p>

<h3>Plans for 2014</h3>

<p>I&rsquo;m planning on reading a similar amount in this upcoming year but
will probably have a bit more non-fiction books. First step towards doing
that is to start classifying my books as non-fiction or fiction. I&rsquo;m
also planning on rereading at least two books that I&rsquo;ve read in the
last few years. This is unusual for me because I don&rsquo;t often reread
books that quickly.</p>

<p>If you have any book recommendations feel free to leave them in the
comments or contact me through twitter or email.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
A project on Heroku that takes your to-read list from goodreads and queries the Chicago Public Library to see if books are available. Someday I&rsquo;ll give it some love and make it usable by others.<a href="#fnref:1" rev="footnote">&#8617;</a></li>
<li id="fn:2">
I&rsquo;ve also applied to be a goodreads librarian so I can actually fix their data as well.<a href="#fnref:2" rev="footnote">&#8617;</a></li>
<li id="fn:3">
One for <a href="http://jakemccrary.com/blog/2013/07/09/releasing-the-functional-javascript-companion/">Functional JavaScript</a> and another for <a href="http://gum.co/dune-dictionary">Dune</a>. If you want a custom Kindle dictionary made feel free to reach out.<a href="#fnref:3" rev="footnote">&#8617;</a></li>
<li id="fn:4">
<p>tech shelf only includes programming books.</p>

<p>|   :shelf | :books | :pages |
|&mdash;&mdash;&mdash;-+&mdash;&mdash;&ndash;+&mdash;&mdash;&ndash;|
| non-tech |     51 |  17798 |
|     tech |     10 |   2707 |
|     read |     61 |  20505 |</p><a href="#fnref:4" rev="footnote">&#8617;</a></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/14/book-review-clojure-high-performance-programming/">Book Review: Clojure High Performance Programming</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-14T16:39:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:39 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I was recently approached by Packt Publishing asking if I&rsquo;d review
Shantanu Kuma&rsquo;s book
<a href="http://www.packtpub.com/clojure-high-performance-programming/book">Clojure High Performance Programming</a>
. It sounded interesting so I took them up on
their offer for a free copy and read it over two flights.</p>

<p>Unsurprisingly the
<a href="http://www.packtpub.com/clojure-high-performance-programming/book#chapter_1">table of contents</a>
does a good job describing the book. This book doesn&rsquo;t
dive too deep into any one topic but instead gives you a taste of
each.</p>

<p>Overall the book was pretty good. It provides interesting examples of
real world Clojure code that solve specific performance problems. It
talks about host performance, both JVM and hardware, concerns which are
both areas that shouldn&rsquo;t be overlooked. I thought the book was best
when showing examples of well performing code from libraries.</p>

<p>I&rsquo;d recommend this book for developers who aren&rsquo;t past the beginning
stages of writing performant code. It does a good job introducing the
topics you&rsquo;ll want to think about when trying to craft well performing
programs.</p>

<p>It isn&rsquo;t for the developer who has spent years optimizing code for
performance. Those developers are already going to be familiar with
the language and concerns of writing high performance code.</p>

<p>If I could add anything to the book it would be a chapter about
measuring performance in production. If you are writing high
performance programs it has been my experience that you <strong>must</strong>
measure in production. This is easiest to do if you build measuring in
from the very beginning.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/11/running-clojure-dot-test-tests-on-file-changes/">Running clojure.test tests on file changes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-11T20:02:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:02 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I recently switched <a href="http://outpace.com">companies</a> and find myself working
on a project that uses <code>clojure.test</code>. I haven&rsquo;t worked with
<code>clojure.test</code> since I started using
<a href="https://github.com/jaycfields/expectations">expectations</a> with
<a href="https://github.com/jakemcc/lein-autoexpect">lein-autoexpect</a>. This
combination spoiled me when it comes to testing Clojure code. I
can no longer stand running tests by hand; I&rsquo;m too used to having a
tool run them for me. As a result I tried out some
<code>clojure.test</code> continuous testing tools.</p>

<p>I wasn&rsquo;t satisfied with what I found. Since I wrote <code>lein-autoexpect</code>,
a continous tester for <code>expectations</code>, it was easy for me to fork it
and and create
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a>.
<code>lein-test-refresh</code> solves the issues I ran into with the other
<code>clojure.test</code> tools.</p>

<p>To use <code>lein-test-refresh</code> follow these steps (latest version found in
image at end):</p>

<ol>
<li>Add <code>[com.jakemccrary/lein-test-refresh "0.1.2"]</code> to the <code>:plugins</code>
section in your <code>project.clj</code> or <code>~/.lein/profiles.clj</code> file.</li>
<li>Run <code>lein test-refresh</code> or <code>lein test-refresh :growl</code>.</li>
<li>Enjoy your minimal feedback delays between editing your Clojure
code and seeing if your tests pass.</li>
</ol>


<p><a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a>
watches the source and test directories specified in your
<code>project.clj</code> and reloads code when files changes. After reloading
your code your <code>clojure.test</code> tests are run and the output is printed
to your console. When you pass <code>:growl</code> as a command line argument the
plugin will use growl to notify you of success and failures. This is
one of my favorite features about <code>lein-test-refresh</code> as it allows me
to continuously run my tests without taking up space on my monitors.</p>

<p>I hope you enjoy
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a>. It
has made using <code>clojure.test</code> much more enjoyable.</p>

<p>Latest version from Clojars:
<img src="https://clojars.org/com.jakemccrary/lein-test-refresh/latest-version.svg" alt="Clojars generated dependency vector" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/10/emacs-capture-shell-command-output-in-temporary-buffer/">Emacs: Capture shell command output in temporary buffer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-10T14:33:00-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:33 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>My text editor of choice is Emacs. Its extensibility is a major
contributor to this preference. The ease of adding additional
functionality means you can customize it to your liking. You should
not go overboard and change too much of the default behavior but you
should feel free to add additional features.</p>

<p>I recently found myself often editing a file in emacs and then
switching to a terminal and running a bash script to see how the
output changed. This is part of my work flow for shutting down or
starting new server processes. Since this is something I&rsquo;ll be doing
quite frequently in the future, I wrote some Emacs Lisp to run the
shell script and display the output in a temporary buffer. With this
function in place I no longer have to toggle to a terminal and run a
command.</p>

<p>I&rsquo;m picky and I wanted this output buffer to have the same behavior as
the help buffer. That is, I wanted to be able to close the buffer by
just hitting the letter <code>q</code>. It took me a while to figure out how to
do this so I thought I would share it here in hopes it might benefit others.</p>

<p>First I&rsquo;ll show the code and then I&rsquo;ll explain what it is doing.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">blog-example</span> <span class="p">()</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">with-output-to-temp-buffer</span> <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">shell-command</span> <span class="s">&quot;echo This is an example&quot;</span>
</span><span class='line'>                   <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>                   <span class="s">&quot;*Messages*&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">pop-to-buffer</span> <span class="s">&quot;*blog-example*&quot;</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above snippet defines a function named <code>blog-example</code>. It takes no
arguments and is interactive (as indicated by the second line calling
<code>interactive</code>). This call to <code>interactive</code> makes <code>blog-example</code>
available to be called interactively, meaning you can call it after
triggering <code>M-x</code>. This is probably a simplification of what is
actually does, so if you care the documentation is available
<a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html">here</a>.</p>

<p>After the call to <code>interactive</code> we hit the core of this function, the
call to <code>with-output-to-temp-buffer</code>. This function a buffer name as a first argument
and additional forms. The output of those forms is put into the named
buffer.</p>

<p>The form I&rsquo;m passing to <code>with-output-to-temp-buffer</code> is a call to
<code>shell-command</code>. <code>shell-command</code> will run <code>echo This is an example</code>
synchronously and redirect stdout to <code>*blog-example*</code> and stderr to
<code>*Messages*</code>.</p>

<p>The final line opens the buffer and switches focus to it. Now you can
look at the output and when you are ready to return just hit <code>q</code>.</p>

<p>This is a simplified example but it shows how easy it is to extend
Emacs functionality. Doing something similar to this made a task I do
frequently more pleasant.</p>

<p>My use case is a bit more complicated and involves saving the buffer
I&rsquo;m currently editing and then running a command against the saved
file. Below is some sample code that does something similar.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">example2</span> <span class="p">()</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">buffer-modified-p</span><span class="p">)</span>
</span><span class='line'>             <span class="p">(</span><span class="nb">y-or-n-p</span> <span class="p">(</span><span class="nb">format</span> <span class="s">&quot;Save file %s? &quot;</span> <span class="p">(</span><span class="nv">buffer-file-name</span><span class="p">))))</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">save-buffer</span><span class="p">))</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">with-output-to-temp-buffer</span> <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nv">concat</span> <span class="s">&quot;wc -l&quot;</span>
</span><span class='line'>                           <span class="s">&quot; &quot;</span>
</span><span class='line'>                           <span class="p">(</span><span class="nv">expand-file-name</span> <span class="p">(</span><span class="nv">buffer-file-name</span><span class="p">)))</span>
</span><span class='line'>                   <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>                   <span class="s">&quot;*Messages*&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">pop-to-buffer</span> <span class="s">&quot;*blog-example*&quot;</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/05/releasing-lein-autoexpect-1-dot-0/">Releasing lein-autoexpect 1.0</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-05T19:50:00-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:50 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>Put together a new release of
<a href="https://github.com/jakemcc/lein-autoexpect">lein-autoexpect</a> today.
lein-autoexpect is a plugin for <a href="http://leiningen.org/">Leiningen</a>
that monitors your source directories for changes and then reloads
your code and runs your
<a href="https://github.com/jaycfields/expectations">expectations</a>. It reports
test output to the console and optionally sends notifications to
<a href="http://growl.info/">Growl</a> (and Growl like notification tools).</p>

<p>To use lein-autoexpect, add <code>:plugins [[lein-autoexpect "1.0"]]</code> to
your either your project&rsquo;s <code>project.clj</code> or your global
<code>~/.lein/profiles.clj</code>. To use the plugin run <code>lein autoexpect</code>.
This will display the test results to the console. To also have
results reported using Growl run <code>lein autoexpect :growl</code>.</p>

<p>Release 1.0 of lein-autoexpect upgrades its dependency on
<a href="https://github.com/clojure/tools.namespace/">org.clojure/tools.namespace</a>
to version 0.2.4. It also no longer crashes if there isn&rsquo;t a Growl
connection available.</p>

<p>If you haven&rsquo;t tried using expectations and lein-autoexpect I
encourage you to give it a try. Having my tests run automatically made
a huge positive difference on my development experience.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/07/09/releasing-the-functional-javascript-companion/">Releasing the Functional JavaScript Companion</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-09T20:22:00-05:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>9</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:22 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>You may have seen me <a href="https://twitter.com/jakemcc/status/352893242473328641">tweeting</a> <a href="https://twitter.com/jakemcc/status/349709102986969088">about</a> building custom Kindle dictionaries. A few months ago I made a
<a href="http://gum.co/dune-dictionary">custom Kindle dictionary</a> for <a href="http://www.amazon.com/gp/product/B00B7NPRY8/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00B7NPRY8&amp;linkCode=as2&amp;tag=jakemccrary08-20&amp;linkId=LC2NFEXWA7JXW57B">Dune</a> and my reading experience greatly improved. Being able to look up unknown terms as easily as English words was amazing. Ever since I&rsquo;ve been looking for other books that could benefit from having a custom dictionary. While reading Fogus&rsquo;s <a href="http://www.amazon.com/gp/product/B00D624AQO/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00D624AQO&amp;linkCode=as2&amp;tag=jakemccrary08-20&amp;linkId=CUEYRNJIQSFNKUSM">Functional JavaScript</a> I saw the opportunity to make a another.</p>

<p>I was taking my time reading Fogus&rsquo;s book and, as a result, found myself forgetting the implementation of functions defined earlier in the book. I wanted to be able to look up implementations easily and realized that a dictionary of function names to implementations would solve my problem.</p>

<p>I found the book&rsquo;s <a href="https://github.com/funjs/book-source">repo</a> and confirmed the license would allow this. Then extracted the data (wrote a simple parser in Clojure, extracts functions that follow <a href="https://github.com/funjs/book-source/blob/dc6c2a97cb1099654f3179fda0794b188fc26f11/chapter03.js#L117">this</a> format) and made a dictionary.</p>

<p>Steps to using my custom dictionary:</p>

<ol>
<li><a href="http://db.tt/eJzkIVfS">Download</a> the dictionary (titled <em>Functional JavaScript Companion</em>).</li>
<li>Put it on your e-ink Kindle (transfer over USB or email it).</li>
<li>Change your default English dictionary to <em>Functional JavaScript Companion</em>.</li>
<li>Start reading <em>Functional JavaScript</em>. Look up function implementations the same way you would normal English words.</li>
</ol>


<p>You can change your Kindle&rsquo;s default dictionary by navigating to <code>Settings &gt; Device Options &gt; Language and Dictionaries</code>. You don&rsquo;t need to do this with all custom dictionaries but it is pretty much a requirement for this one. Many of the function names are English words and as a result if you don&rsquo;t change the default to <em>Functional JavaScript Companion</em> you&rsquo;ll end up looking up the definitions of standard English words.</p>

<p>This dictionary isn&rsquo;t perfect but it did improve my reading experience. One example of where it fails is if you look up the function <code>partial1</code> it will look up <code>partial</code>. This is result of how the Kindle looks up words. Another minor issue is that the functions are often too large to fit in the pop-up window. The fix to both of these is to click the &ldquo;Show Full Definition&rdquo; button of the pop-up to be taken to the dictionary. Another issue is that the numerous functions defined by composition (example: <a href="https://github.com/funjs/book-source/blob/dc6c2a97cb1099654f3179fda0794b188fc26f11/chapter03.js#L125"><code>isOdd</code></a>) are not parsed by my parser and therefor not part of the dictionary.</p>

<p>This was definitely a larger challenge than creating my custom <a href="http://gum.co/dune-dictionary">Dune dictionary</a>. It forced me to dive into the Amazon documentation a bit and figure out more of the markup language. I have notes on my experience creating Kindle dictionaries and sometime in the future will be writing a post with details about what I&rsquo;ve learned.</p>

<p>I can&rsquo;t recommend Fogus&rsquo;s <a href="http://www.amazon.com/gp/product/B00D624AQO/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B00D624AQO&amp;linkCode=as2&amp;tag=jakemccrary08-20&amp;linkId=CUEYRNJIQSFNKUSM">Functional JavaScript</a> enough. If you do read it give my <a href="http://db.tt/eJzkIVfS">dictionary</a> a shot. I think it makes the reading experience a bit nicer.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/05/06/book-review-clojure-data-analysis-cookbook/">Book Review: Clojure Data Analysis Cookbook</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-05-06T07:00:00-05:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>6</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:00 am</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I spent the last week reading <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> the <a href="http://www.packtpub.com/clojure-data-analysis-cookbook/book">Clojure Data Analysis Cookbook</a> by Eric Rochester. As you may expect from the name, this book follows a traditional cookbook format. Each section presents a goal and then some code which achieves the goal.</p>

<p>The text covers a variety of data analysis topics. Some include reading data from files, machine learning, graphing, and interfacing with other analysis tools. I particularly enjoyed the section on lazily processing large data sets. I find this is an area of frustration for many and this should serve as a reference to point them towards.</p>

<p>The examples are fairly easy to follow. Many of the examples use <code>require</code> to alias dependent namespaces. I think this is key when presenting Clojure examples. Having to prefix calls to library functions causes them to stand out from uses of core Clojure functions. It also lets readers know from which library each function comes from. I would have liked to see all of the examples use <code>require</code> instead of <code>use</code> for pulling in dependencies because of the clarity it brings.</p>

<p>I do have a sort of nit-picky negative about this (in particular, the PDF I received from the Packt Publishing website) book. While the vast majority of the code examples were well formatted every once in a while one would be poorly formatted. Poorly formatted code in a book all about showing code is disappointing and interrupts the flow of reading a recipe. One example of this is found in the first step of chapter 3&rsquo;s &ldquo;Combining agents and STM&rdquo; recipe.</p>

<h4>Recommendation</h4>

<p>Would I recommend getting this book? If any section in the table of contents sounds useful to you then yes, you should buy the book. It will be a useful reference.</p>

<p>Would I recommend reading this book front to back? Probably not. I would recommend reading sections that interest you and skimming others.</p>

<p>Just like a food cookbook&rsquo;s purpose (usually) isn&rsquo;t to teach you how to cook, this book will not teach you how to write Clojure. It will help you become better at specific tasks.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
I was given this book to review by Packt Publishing. If you think you have something interesting to read and want another set of eyes on it, feel free to reach out. Depending on the topic I&rsquo;m willing to give feedback before publication or potentially write a review after.<a href="#fnref:1" rev="footnote">&#8617;</a></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/15/manage-your-workspace-with-grids-under-linux-osx-and-windows/">Manage your workspace with grids under Linux, OS X, and Windows</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-04-15T19:15:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:15 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m the type of computer user that wants an organized
workspace. To me this means having my active applications organized
into a grid. Efficiently doing this is important to me. Before I jump
into what tools I use let me give a quick explanation of what
organized into a grid means to me.</p>

<p>Imagine that your screen is divided both vertically and
horizontally. To me a good tool for managing windows lets you take
your active application and move it so it fits in any rectangle formed
by the edges of your screen and those two lines splitting your
monitor. This means that with a keystroke you can make the active
window take up the full screen, half screen, or quarter screen. Below
I&rsquo;ve listed the tools that let me do that.</p>

<h4>Linux</h4>

<p>I&rsquo;ve switched to using <a href="http://i3wm.org/">i3</a>, a
<a href="http://en.wikipedia.org/wiki/Tiling_window_manager">tiling window manager</a>
instead of the default window manager on every distribution I use. When using
i3 the tiling is done automatically. There are hotkeys for changing
window layout and for moving focus between windows. The automatic tiling and
shortcuts take a bit to get used to, but now that I am I can&rsquo;t believe
I switched to using a tiling window manager sometime in the last eight
months.</p>

<h4>Windows</h4>

<p>When developing under Windows I use
<a href="http://winsplit-revolution.com/">Winsplit Revolution</a>. Unlike i3,
Winsplit Revolution only provides hotkeys snapping windows to
different locations. This is admittedly more approachable than i3 as
the grid isn&rsquo;t forced on you. WinSplit Revolution is pretty flexible,
you can change shortcuts and even define your own grid.</p>

<p>I can&rsquo;t remember when I started using Winsplit Revolution but it has
become a vital tool for when I&rsquo;m stuck doing development on a Windows
machine.</p>

<h4>OS X</h4>

<p>My only OS X machine is my 13 inch MacBook Air. I always thought that
with such a small screen being able to tile my windows wouldn&rsquo;t be as
useful. I  was completely wrong. If anything it may be more useful
because of the tiny screen real estate. The 13 inch screen is just wide
enough to have an editor up on one half and documentation on the
other.</p>

<p>The tool I use to snap my windows to a grid is
<a href="http://spectacleapp.com/">Spectacle</a>. Spectacle provides some
sensible keystrokes for moving windows around. The hotkeys are
similar to Winsplit Revolution&rsquo;s which makes switching between
operating systems easy.</p>

<p>If you haven&rsquo;t tried using a tool to help you organize your windows I
highly recommend that you do. I&rsquo;ve introduced both technical and
non-technical people to these tools and everyone has enjoyed them.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog//11">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog//9">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2023/01/14/reading-in-2022/">Reading in 2022</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/11/13/bookmarklets-on-mobile-are-useful/">Bookmarklets on mobile are useful</a>
      </li>
    
      <li class="post">
        <a href="/blog/2022/01/02/reading-in-2021/">Reading in 2021</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/09/11/tests-can-act-as-living-documentation/">Tests are living documentation</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/08/07/improve-your-tests-by-picking-better-constants/">Improve your tests by picking better constants</a>
      </li>
    
      <li class="post">
        <a href="/blog/2021/01/24/reading-in-2020/">Reading in 2020</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/12/30/speeding-up-magit-with-the-native-comp-branch-of-emacs/">Speeding up Magit with the native-comp branch of Emacs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/14/speeding-up-magit/">Speeding up magit</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/11/11/creating-a-custom-kindle-dictionary/">Creating a custom Kindle dictionary</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/10/03/go-create-silly-small-programs/">Go create silly, small programs</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Subscribe</h1>
  <p>Looking forward to reading more of my writing?</p>
  <p>Sign up for my <a target="_blank" href="https://jakemccrary.substack.com/welcome">newsletter</a> to get periodic emails with links to my latest writing and other thoughts.</p>
  <p>Can't wait for the infrequent newsletter? Subscribe to the <a href="http://feeds.feedburner.com/JakeMccrarysMusings">RSS</a> feed.</p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="/disclosure-policy">Disclosure Policy</a><br/>
  <a href="//www.iubenda.com/privacy-policy/509351" class="iubenda-nostyle iub-legal-only iubenda-embed" title="Privacy Policy">Privacy Policy</a><br/>
<script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src = "//cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
  Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
</p>


</footer>
</body>
</html>
