<div class="highlight"><pre><span class="p">(</span><span class="k">defn </span><span class="nv">create-table</span>
  <span class="s">&quot;Creates a table on the open database connection given a table name and</span>
<span class="s">  specs. Each spec is either a column spec: a vector containing a column</span>
<span class="s">  name and optionally a type and other constraints, or a table-level</span>
<span class="s">  constraint: a vector containing words that express the constraint. All</span>
<span class="s">  words used to describe the table may be supplied as strings or keywords.&quot;</span>
  <span class="p">[</span><span class="nv">name</span> <span class="nv">&amp;</span> <span class="nv">specs</span><span class="p">]</span>
  <span class="p">(</span><span class="nf">do-commands</span>                                              
   <span class="p">(</span><span class="nf">format</span> <span class="s">&quot;CREATE TABLE %s (%s)&quot;</span>                           
           <span class="p">(</span><span class="nf">as-str</span> <span class="nv">name</span><span class="p">)</span>
           <span class="p">(</span><span class="nb">apply </span><span class="nv">str</span>                                       
             <span class="p">(</span><span class="nb">map </span><span class="nv">as-str</span>                                    
              <span class="p">(</span><span class="nb">apply </span><span class="nv">concat</span>                                 
               <span class="p">(</span><span class="nf">interpose</span> <span class="p">[</span><span class="s">&quot;, &quot;</span><span class="p">]</span>                            
                <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="nb">partial </span><span class="nv">interpose</span> <span class="s">&quot; &quot;</span><span class="p">)</span> <span class="nv">specs</span><span class="p">))))))))</span>
</pre>
</div>
