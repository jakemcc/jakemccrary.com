
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="iem7"><![endif]-->
<!--[if lt IE 9]><html class="lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html lang="en"><!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <title>Jake McCrary</title>
    <meta name="author" content="Jake McCrary">

    
    
    
    

    <meta itemprop="name" content="Jake McCrary" />
    <meta itemprop="description" content=" I was recently given a review copy of
Clojure for Machine Learning.
I have an academic familiarity with machine learning techniques and
presented on &hellip;" />

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@jakemcc" />
    <meta name="twitter:title" content="Jake McCrary" />
    <meta name="twitter:description" content=" I was recently given a review copy of
Clojure for Machine Learning.
I have an academic familiarity with machine learning techniques and
presented on &hellip;" />
    <meta name="twitter:creator" content="@jakemcc" />
    <meta name="twitter:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />

    <!-- Open Graph data -->
    <meta property="og:site_name" content="The Blog of Jake McCrary" />
    <meta property="og:url" content="https://jakemccrary.com/blog/8/" />
    <meta property="og:title" content="Jake McCrary" />
    <meta property="og:description" content=" I was recently given a review copy of
Clojure for Machine Learning.
I have an academic familiarity with machine learning techniques and
presented on &hellip;" />
    <meta property="og:image" content="https://jakemccrary.com/images/jake-surprised-eyes-brighter.jpg" />
    
    

    <meta name="description" content=" I was recently given a review copy of
Clojure for Machine Learning.
I have an academic familiarity with machine learning techniques and
presented on &hellip;">

    

    <!-- http://t.co/dKP3o1e -->
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="canonical" href="https://jakemccrary.com/blog/8/">
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="alternate" title="Jake McCrary" type="application/atom+xml">
    <link href="https://jakemccrary.com/feed.json" rel="alternate" title="Jake McCrary" type="application/json">

    <!-- iOS scaling bug fix Rewritten version By @mathias, @cheeaun and @jdalton Source url: https://gist.github.com/901295 -->
    <script type="text/javascript">
     (function(doc) {
       var addEvent = 'addEventListener',
           type = 'gesturestart',
           qsa = 'querySelectorAll',
           scales = [1, 1],
           meta = qsa in doc ? doc[qsa]('meta[name=viewport]') : [];
       function fix() {
         meta.content = 'width=device-width,minimum-scale=' + scales[0] + ',maximum-scale=' + scales[1];
         doc.removeEventListener(type, fix, true);
       }
       if ((meta = meta[meta.length - 1]) && addEvent in doc) {
         fix();
         scales = [0.25, 1.6];
         doc[addEvent](type, fix, true);
       }
     }(document));
    </script>
    
<script>
 var origin = window.location.origin;
 if (!origin) {
   origin = window.location.protocol + '//' + window.location.hostname + (window.location.port ? (':' + window.location.port) : '');
 }
 if (origin.indexOf('localhost') === -1) {
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
   })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

   ga('create', 'UA-19834208-2', 'auto');
   ga('send', 'pageview');
 }
</script>


  </head>

<body  >
  <header role="banner"><hgroup>
  <h1><a href="/">Jake McCrary</a></h1>
  
</hgroup>

</header>
  <nav role="navigation"><ul role=main-navigation>
  <li><a href="/">Articles</a></li>
  <li><a href="/adventures/">Adventures</a></li>
  <li><a href="/about.html">About</a></li>
  <li><a href="/blog/archives/">Archives</a></li>
  <li><a href="http://feeds.feedburner.com/JakeMccrarysMusings" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
</ul>

  <form action="https://google.com/search" method="get">
    <fieldset role="search">
      <input type="hidden" name="sitesearch" value="jakemccrary.com">
      <input class="search" type="text" name="q" placeholder="Search"/>
    </fieldset>
  </form>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/24/book-review-clojure-for-machine-learning/">Book Review: Clojure for Machine Learning</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-24T10:09:00-05:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>10:09 am</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I was recently given a review copy of
<a href="http://www.packtpub.com/clojure-for-machine-learning/book">Clojure for Machine Learning</a>.
I have an academic familiarity with machine learning techniques and
presented on a few at <a href="http://speakerconf.com/">speakerconf</a>
2012. I haven&rsquo;t explored machine learning in Clojure since preparing
that talk and was excited to read a book on the topic.</p>

<p>The book gives a shallow introduction to many
<a href="http://www.packtpub.com/clojure-for-machine-learning/book#chapter_0">different topics</a>.
It does so through a bit of mathematics and much more code. Depending
on the section, the code examples implement the algorithm being
discussed, show you how to use a specific library, or do both.</p>

<p>An aspect I particularly enjoy about the code examples is that
they always start by showing what dependencies should be added to
your <code>project.clj</code> file. This is done even if the library has been used in
a previous chapter. Because of this every example can stand on its own.</p>

<p>Something that can almost always be improved about Clojure
 examples is that namespaces should be referenced using the
<code>require</code> form with a namespace alias. Even if that require requires a namespace
with a terrible alias, such as <code>(require '[example :as e])</code>, it makes
the example code easier to understand. Being able to read <code>e/a-func</code>
instead of <code>a-func</code> makes it more explicit as to where that function
is located and aides understanding.</p>

<p>I rate all
<a href="https://www.goodreads.com/user/show/3431614-jake-mccrary">my books</a>
by the <a href="http://goodreads.com/">goodreads</a> five star scale<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>. This
book earns three stars. Even with my limited machine learning
background I didn&rsquo;t learn anything new but I was introduced to some
Clojure libraries and enjoyed seeing Clojure implementations of
machine learning techniques.</p>

<p>If you enjoy Clojure and the
<a href="http://www.packtpub.com/clojure-for-machine-learning/book#chapter_0">table of contents</a>
excites you then you&rsquo;ll most likely find this book interesting. If you
want to maximize your learning I&rsquo;d recommend taking an
<a href="https://www.coursera.org/courses?search=machine%20learning">online course</a>
in machine learning<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>. It will be a larger time investment but you&rsquo;ll
leave with a deeper understanding.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>1 star = did not like, 2 stars = it was ok, 3 stars = liked it, 4 stars = really liked it, 5 stars = loved it.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>I took the original offering from <a href="https://www.coursera.org/course/ml">Stanford</a> when it was first offered. Post about it <a href="http://jakemccrary.com/blog/2011/12/29/reflections-on-stanfords-online-class-experiment/">here</a>.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/04/27/emacs-generating-project-shortcuts/">Emacs: Generating project shortcuts</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-04-27T16:38:00-05:00'><span class='date'><span class='date-month'>Apr</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>4:38 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I&rsquo;m now writing Clojure nearly 100% of my time and as a result am spending more
time in Emacs. I&rsquo;m working in a few different projects and
wanted a quicker way to jump between them. My first attempt at this
ended with me defining many functions that looked like the following.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">b/test-refresh</span> <span class="p">()</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">find-file</span> <span class="s">&quot;~/src/jakemcc/lein-test-refresh/test-refresh/project.clj&quot;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>After writing a couple of these I decided the computer could do this
better than I could and decided to write some code to automate it. A
sample of my directory structure is shown below.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>jakemcc/
</span><span class='line'>├── bookrobot
</span><span class='line'>│   └── project.clj
</span><span class='line'>└── lein-autoexpect
</span><span class='line'>    └── project.clj
</span></code></pre></td></tr></table></div></figure>


<p>Taking advantage of this structure I wrote some Emacs lisp to walk a
directory and define functions that open up any found project.clj
files.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="c1">;; -*- lexical-binding: t -*-</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">open-file-fn</span> <span class="p">(</span><span class="nv">file</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="k">lambda</span> <span class="p">()</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">find-file</span> <span class="nv">file</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">create-project-shortcuts</span> <span class="p">(</span><span class="nv">prefix</span> <span class="nv">base</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nb">elt</span> <span class="p">(</span><span class="nv">directory-files</span> <span class="nv">base</span><span class="p">))</span>
</span><span class='line'>    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nv">project</span> <span class="p">(</span><span class="nv">concat</span> <span class="nv">base</span> <span class="s">&quot;/&quot;</span> <span class="nb">elt</span> <span class="s">&quot;/project.clj&quot;</span><span class="p">)))</span>
</span><span class='line'>      <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nv">file-exists-p</span> <span class="nv">project</span><span class="p">)</span>
</span><span class='line'>        <span class="p">(</span><span class="nv">fset</span> <span class="p">(</span><span class="nb">intern</span> <span class="p">(</span><span class="nv">concat</span> <span class="nv">prefix</span> <span class="nb">elt</span><span class="p">))</span> <span class="p">(</span><span class="nv">open-file-fn</span> <span class="nv">project</span><span class="p">))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>open-file-fn</code> creates an anonymous interactive function (meaning the function
can be called interactively) that opens <code>file</code>. It takes advantage of
the feature in Emacs 24 that enables lexical scoping by adding <code>;; -*-
lexical-binding: t -*-</code> to the top of your Emacs lisp file. This lets
the anonymous function capture <code>file</code>.</p>

<p><code>create-project-shortcuts</code> takes in a <code>prefix</code> and a <code>base</code> directory.
It searches <code>base</code> for directories that contain a
project.clj file. For each found project.clj file a function is
created (using <code>fset</code>) with the name of the containing directory
prefixed by <code>prefix</code>.</p>

<p>With those two functions defined all that is left is to call
<code>create-project-shortcuts</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nv">create-project-shortcuts</span> <span class="s">&quot;b/&quot;</span> <span class="s">&quot;~/src/jakemcc&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now <code>b/bookrobot</code> and <code>b/lein-autoexpect</code> are available after hitting
<code>M-x</code>.</p>

<p>I&rsquo;ve used this code to create quick
shortcuts to all of my work and non-work projects. It has been
immensely useful for jumping around projects.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/03/30/managing-windows-in-osx-using-phoenix/">Managing windows in OS X using Phoenix</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-03-30T18:30:00-05:00'><span class='date'><span class='date-month'>Mar</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>6:30 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://jakemccrary.com/blog/2013/04/15/manage-your-workspace-with-grids-under-linux-osx-and-windows/">Last year</a>
I wrote about how I managed my windows under OS X, Windows, and Linux.
I&rsquo;m a big fan of having an orderly layout and try to use grid
managers. Since then I&rsquo;ve changed jobs and now my main machine is an
MacBook Pro running OS X Mavericks with two 27 inch cinema displays.
As a result I&rsquo;ve started experimenting with more OS X window managers.
After trying a few out I&rsquo;m going to stick with
<a href="https://github.com/sdegutis/Phoenix">Phoenix</a>.</p>

<h3>Before Phoenix</h3>

<p>Last year I was satisfied using <a href="http://spectacleapp.com/">Spectacle</a>.
It is (or at least was, I haven&rsquo;t used it in a while) easy to install
and had good defaults. I&rsquo;d still recommend it for most people.</p>

<p>At the recommendation from a reader, I switched to
<a href="https://github.com/jigish/slate">Slate</a>. Slate has a ton of features
and I barely scratched the surface in how I used it. I used it as a
replacement for Spectacle and didn&rsquo;t touch any of the advanced
features. Before I had the urge to explore the advanced features I
ended up becoming dissatisfied with Slate. I ran into an issue where
after running for a while (talking at least a week) it would start to
respond slowly. I&rsquo;d try to move a window to another monitor and it
wouldn&rsquo;t move. Eventually I&rsquo;d be in another process and the
command would register sending whatever window I was currently focused
on to another monitor.</p>

<h3>Introducing Phoenix</h3>

<p>I was looking for solutions to Slate&rsquo;s unresponsiveness when I
stumbled on <a href="https://github.com/sdegutis/Phoenix">Phoenix</a>. I was
drawn in by its stated goal; it &ldquo;aims for efficiency and a very small
footprint.&rdquo; The fact that it is still being actively developed was
also a huge selling point. Knowing that any bugs I find have a
potential to be fixed is great.</p>

<p>Phoenix provides a
<a href="https://github.com/sdegutis/Phoenix/wiki/JavaScript-API-documentation">JavaScript API</a>
that allows you to interact with your running applications or launch
applications. It doesn&rsquo;t provide anything out of the box; it is up to
you to make it useful by writing your own (or taking another persons)
configuration.</p>

<p>This is a double-edged sword. This means you get exactly the features
you want. It also means you might spend significant amounts of time
figuring out how to get the features you want.</p>

<p>Luckily there are <a href="https://github.com/sdegutis/Phoenix/wiki">examples</a>
that you can use as a starting point. Browsing through the examples is
a great way of becoming familiar with what is possible and can be
inspiring.</p>

<p>My
<a href="https://github.com/jakemcc/dotfiles/blob/17a73f89a2f3f7b2c9aa07a63d1928b86cc5425d/home/.phoenix.js">configuration</a>
is relatively minimal. I&rsquo;ve written
<a href="https://github.com/jakemcc/dotfiles/blob/17a73f89a2f3f7b2c9aa07a63d1928b86cc5425d/home/.phoenix.js#L42-L87">code</a>
to move windows between monitors (rotating between three added some
complexity to this),
<a href="https://github.com/jakemcc/dotfiles/blob/17a73f89a2f3f7b2c9aa07a63d1928b86cc5425d/home/.phoenix.js#L90-L122">start or focus</a>
certain applications, and
<a href="https://github.com/jakemcc/dotfiles/blob/17a73f89a2f3f7b2c9aa07a63d1928b86cc5425d/home/.phoenix.js#L11-L37">resize</a>
windows. This is enough for me to feel efficient.</p>

<p>I encourage you to use a tool to help manage your windows. Personally
I think Phoenix is pretty great and don&rsquo;t mind tinkering with my
configuration and strongly recommend it. As a bonus it is a young
project where the maintainer is open to suggestions. If you have an
idea for a useful
<a href="https://github.com/sdegutis/Phoenix/issues/18">feature</a> it has a
possibility of being added pretty quickly.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/02/02/flexible-notification-of-clojure-tests-failing/">Flexible notification of Clojure tests failing</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-02-02T18:11:00-06:00'><span class='date'><span class='date-month'>Feb</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2014</span></span> <span class='time'>6:11 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> has
always supported notifying you of your tests' status through growl.
With the release of version 0.3.4 it now will notify you using
whatever program you want.</p>

<p>To make my Mac whisper my the results of running my tests I can use
the following project.clj</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">sample</span> <span class="s">&quot;1.2.3&quot;</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.5.1&quot;</span><span class="p">]]</span>
</span><span class='line'>  <span class="ss">:profiles</span> <span class="p">{</span><span class="ss">:dev</span> <span class="p">{</span><span class="ss">:plugins</span> <span class="p">[[</span><span class="nv">com.jakemccrary/lein-test-refresh</span> <span class="s">&quot;0.3.4&quot;</span><span class="p">]]}}</span>
</span><span class='line'>  <span class="ss">:test-refresh</span> <span class="p">{</span><span class="ss">:notify-command</span> <span class="p">[</span><span class="s">&quot;say&quot;</span> <span class="s">&quot;-v&quot;</span> <span class="s">&quot;Whisper&quot;</span><span class="p">]})</span>
</span></code></pre></td></tr></table></div></figure>


<p>The specification of the command is found in the <code>:test-refresh
{:notify-command ["say" "-v" "Whisper"]}</code> entry in the above
project.clj. After running your tests
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> will
pass a (usually) short summary message as the final parameter to the
specified command.</p>

<p>Now you can finally have the results of running
your tests whispered to you.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/12/releasing-lein-test-refresh-0-dot-3-0/">Releasing lein-test-refresh 0.3.0</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-12T20:12:00-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>12</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>8:12 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>At the suggestion of my coworker <a href="http://www.xpteam.com/">Jeff Bay</a>
you can now hit a single keystroke to cause
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> to
rerun your tests. Now you can hit enter in the terminal running <code>lein
test-refresh</code> to cause your tests to be run.</p>

<p>Add the below text to your project.clj to start using
<code>lein-test-refresh</code> today.
<img src="https://clojars.org/com.jakemccrary/lein-test-refresh/latest-version.svg" alt="Clojars generated dependency vector" /></p>

<p>As a reminder if you call you can pass the argument <code>:growl</code> to
lein-test-refresh. If you pass <code>:growl</code> as an argument then you&rsquo;ll be
notified of test success and failures through
<a href="http://growl.info/">growl</a>. On top of the quick feedback cycles that
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a> (and
<a href="https://github.com/jakemcc/lein-autoexpect">lein-autoexpect</a>)
provides the growl notification is my favorite feature. I&rsquo;d highly
recommend giving it a shot.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/01/01/using-incanter-to-review-my-2013-reading/">Using Incanter to review my 2013 reading</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-01-01T17:31:00-06:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>1</span><span class='date-suffix'>st</span>, <span class='date-year'>2014</span></span> <span class='time'>5:31 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I use <a href="https://goodreads.com">goodreads</a> to keep track of
<a href="https://www.goodreads.com/user/show/3431614-jake-mccrary">my reading</a>
and have since early 2010. I find very useful for capturing what I
want to read and reminding me of how I felt about books I&rsquo;ve read. I
thought it would be fun to take a closer look at what I read in 2013.
I&rsquo;m doing this using <a href="http://clojure.org/">Clojure</a> with
<a href="http://incanter.org/">Incanter</a>. I haven&rsquo;t used Incanter since I
wrote
<a href="http://jakemccrary.com/blog/2010/02/21/plotting-time-series-data-with-incanter/">this</a>
post and thought this would be a good opportunity to visit it again.</p>

<p>First I need to get my data out of goodreads. I&rsquo;ve worked with the
Goodreads API before <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup> but am not going to use it for this
exercise. Instead I&rsquo;m using the goodreads export functionality (at
goodreads follow the links: My Books > import/export) to export a csv
file. Having the csv file also lets me cleanup some of the data since
some of the book&rsquo;s page counts were missing <sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>.</p>

<p>Now that I have data it is time to start playing with it. Run <code>lein new goodreads-summary</code> and edit the <code>project.clj</code> file to have a dependency on Incanter.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defproject </span><span class="nv">goodreads-summary</span> <span class="s">&quot;0.1.0-SNAPSHOT&quot;</span>
</span><span class='line'>  <span class="ss">:dependencies</span> <span class="p">[[</span><span class="nv">org.clojure/clojure</span> <span class="s">&quot;1.5.1&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">org.clojure/data.csv</span> <span class="s">&quot;0.1.2&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">incanter</span> <span class="s">&quot;1.5.4&quot;</span><span class="p">]</span>
</span><span class='line'>                 <span class="p">[</span><span class="nv">clj-time</span> <span class="s">&quot;0.6.0&quot;</span><span class="p">]])</span>
</span></code></pre></td></tr></table></div></figure>


<p>Next I&rsquo;m going to take the csv file and transform it into an Incanter
dataset. This is easily done with
<a href="http://liebke.github.io/incanter/io-api.html#incanter.io/read-dataset">incanter.io/read-dataset</a>.
It isn&rsquo;t well documented but by passing <code>:keyword-headers false</code> to
<code>read-dataset</code> the headers from the csv are not converted to keywords.
I&rsquo;m doing this because some of the goodreads headers contain spaces
and dealing with spaces in keywords is a pain. The snippet below has
all of the necessary requires for the remainder of the examples.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">ns </span><span class="nv">goodreads-summary.core</span>
</span><span class='line'>  <span class="p">(</span><span class="ss">:require</span> <span class="p">[</span><span class="nv">clojure.data.csv</span> <span class="ss">:as</span> <span class="nv">csv</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">clojure.string</span> <span class="ss">:as</span> <span class="nv">str</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">incanter.core</span> <span class="ss">:as</span> <span class="nv">incanter</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">incanter.io</span> <span class="ss">:as</span> <span class="nv">io</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">incanter.charts</span> <span class="ss">:as</span> <span class="nv">charts</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">clj-time.core</span> <span class="ss">:as</span> <span class="nv">tc</span><span class="p">]</span>
</span><span class='line'>            <span class="p">[</span><span class="nv">clj-time.format</span> <span class="ss">:as</span> <span class="nv">tf</span><span class="p">]))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">read-csv</span> <span class="p">[</span><span class="nv">filepath</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">io/read-dataset</span> <span class="nv">filepath</span> <span class="ss">:header</span> <span class="nv">true</span> <span class="ss">:keyword-headers</span> <span class="nv">false</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Calling <code>read-csv</code> with the path to the exported goodreads data
results in dataset. If you want to view the data use
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/view">incanter.core/view</a>.
Running <code>(incanter/view (read-csv "goodreads_export.csv"))</code> pops up a
grid of with all the data. I don&rsquo;t care about most of the columns so
lets define a function that selects out the few I care about.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">select-columns</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/sel</span> <span class="nv">dataset</span> <span class="ss">:cols</span> <span class="p">[</span><span class="s">&quot;Number of Pages&quot;</span> <span class="s">&quot;Date Read&quot;</span> <span class="s">&quot;Bookshelves&quot;</span> <span class="s">&quot;Exclusive Shelf&quot;</span><span class="p">]))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Selecting columns is done with
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/sel">incanter.core/sel</a>.
Like most Incanter functions it has many overloads. One way to use it
is to pass a dataset with a vector of columns you want to select.</p>

<p>Filtering a dataset is done using
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/$where">incanter.core/$where</a>.
Goodreads has three default shelves <strong>to-read</strong>,
<strong>currently-reading</strong>, and <strong>read</strong>. To select all your read books you
filter of the <strong>Exclusive Shelf</strong> column for <strong>read</strong> books.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">finished</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/$where</span> <span class="p">{</span><span class="s">&quot;Exclusive Shelf&quot;</span> <span class="s">&quot;read&quot;</span><span class="p">}</span> <span class="nv">dataset</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Filtering for books read in 2013 is a bit more complicated. First I
convert the <strong>Date Read</strong> column from a string to a
<code>org.joda.time.DateTime</code>. This is done with the combination of
<code>transform-date-read-column</code> and <code>parse-date</code>. Some of the my data is missing a <strong>Date Read</strong> value. I&rsquo;m choosing to handle this by treating missing data as the result of <code>(clj-time.core/date-time 0)</code>.</p>

<p>The <code>$where</code> in <code>books-read-in-2013</code> is a bit more complicated than
the filtering in <code>finished</code>. Here I&rsquo;m providing a predicate to
use instead of just doing an equality comparison.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">parse-date</span> <span class="p">[</span><span class="nv">date-str</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">if </span><span class="nv">date-str</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">tf/parse</span> <span class="p">(</span><span class="nf">tf/formatter</span> <span class="s">&quot;yyyy/MM/dd&quot;</span><span class="p">)</span> <span class="nv">date-str</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">tc/date-time</span> <span class="mi">0</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">transform-date-read-column</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/transform-col</span> <span class="nv">dataset</span> <span class="s">&quot;Date Read&quot;</span> <span class="nv">parse-date</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">date-greater-than-pred</span> <span class="p">[</span><span class="nv">date</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">challenger</span><span class="p">]</span>
</span><span class='line'>    <span class="p">(</span><span class="nb">&gt; </span><span class="p">(</span><span class="nf">.compareTo</span> <span class="nv">challenger</span> <span class="nv">date</span><span class="p">)</span> <span class="mi">0</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">books-read-in-2013</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">finished</span> <span class="p">(</span><span class="nf">finished</span> <span class="p">(</span><span class="nf">select-columns</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">with-dates</span> <span class="p">(</span><span class="nf">incanter/$where</span> <span class="p">{</span><span class="s">&quot;Date Read&quot;</span> <span class="p">{</span><span class="ss">:fn</span> <span class="nv">identity</span><span class="p">}}</span> <span class="nv">finished</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">with-date-objects</span> <span class="p">(</span><span class="nf">transform-date-read-column</span> <span class="nv">with-dates</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">incanter/$where</span> <span class="p">{</span><span class="s">&quot;Date Read&quot;</span> <span class="p">{</span><span class="ss">:fn</span> <span class="p">(</span><span class="nf">date-greater-than-pred</span> <span class="p">(</span><span class="nf">parse-date</span> <span class="s">&quot;2012/12/31&quot;</span><span class="p">))}}</span>
</span><span class='line'>                     <span class="nv">with-date-objects</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now we have a dataset that that contains only books read in 2013
(well, until I read a book in 2014 and the filter above also grabs
books in 2014). Now to generate some analytic for each month. First
lets add a <strong>Month</strong> column to our data. Originally I wrote the
function below. It uses <code>incanter.core/$map</code> to generate the data,
makes a dataset with the new data, and then adds that to the original
dataset.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">add-month-read-column</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">month-read</span> <span class="p">(</span><span class="nf">incanter/$map</span> <span class="nv">tc/month</span> <span class="s">&quot;Date Read&quot;</span> <span class="nv">dataset</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">month-dataset</span> <span class="p">(</span><span class="nf">incanter/dataset</span> <span class="p">[</span><span class="s">&quot;Month&quot;</span><span class="p">]</span> <span class="nv">month-read</span><span class="p">)</span>
</span><span class='line'>        <span class="nv">with-month-read</span> <span class="p">(</span><span class="nf">incanter/conj-cols</span> <span class="nv">dataset</span> <span class="nv">month-dataset</span><span class="p">)]</span>
</span><span class='line'>    <span class="nv">with-month-read</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>When I wrote the above code it seemed like there should be a better
way. While writing this post I stumbled across
<a href="http://liebke.github.io/incanter/core-api.html#incanter.core/add-derived-column">incanter.core/add-derived-column</a>.
Switching to <code>add-derived-column</code> makes <code>add-month-read-column</code> almost trivial.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">add-month-read-column</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">incanter/add-derived-column</span> <span class="s">&quot;Month&quot;</span> <span class="p">[</span><span class="s">&quot;Date Read&quot;</span><span class="p">]</span> <span class="nv">tc/month</span> <span class="nv">dataset</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now that we have <code>add-month-read-column</code>  we can now start aggregating
some stats. Lets write code for calculating the pages read per month.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">pages-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">with-month-read</span> <span class="p">(</span><span class="nf">add-month-read-column</span> <span class="nv">dataset</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nf">incanter/$rollup</span> <span class="ss">:sum</span> <span class="s">&quot;Number of Pages&quot;</span> <span class="s">&quot;Month&quot;</span> <span class="nv">with-month-read</span><span class="p">)</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">incanter/$order</span> <span class="s">&quot;Month&quot;</span> <span class="ss">:asc</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p>That was pretty easy. Lets write a function to count the number of books read per month.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">book-count-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nv">with-month-read</span> <span class="p">(</span><span class="nf">add-month-read-column</span> <span class="nv">dataset</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nf">incanter/$rollup</span> <span class="ss">:count</span> <span class="s">&quot;Number of books&quot;</span> <span class="s">&quot;Month&quot;</span> <span class="nv">with-month-read</span><span class="p">)</span>
</span><span class='line'>         <span class="p">(</span><span class="nf">incanter/$order</span> <span class="s">&quot;Month&quot;</span> <span class="ss">:asc</span><span class="p">))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>pages-by-month</code> and <code>book-count-by-month</code> are very similar. Each uses <a href="http://liebke.github.io/incanter/core-api.html#incanter.core/$rollup">incanter.core/$rollup</a> to calculate per month stats. The first argument to <code>$rollup</code> can be a function that takes a sequence of values or one of the supported magical &ldquo;function identifier keywords&rdquo;.</p>

<p>Next lets combine the data together so we can print out a nice table. While we are at it lets add another column.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">stats-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">-&gt;&gt;</span> <span class="p">(</span><span class="nf">incanter/$join</span> <span class="p">[</span><span class="s">&quot;Month&quot;</span> <span class="s">&quot;Month&quot;</span><span class="p">]</span>
</span><span class='line'>                     <span class="p">(</span><span class="nf">pages-by-month</span> <span class="nv">dataset</span><span class="p">)</span>
</span><span class='line'>                     <span class="p">(</span><span class="nf">book-count-by-month</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">incanter/rename-cols</span> <span class="p">{</span><span class="s">&quot;Number of Pages&quot;</span> <span class="s">&quot;Page Count&quot;</span>
</span><span class='line'>                              <span class="s">&quot;Number of books&quot;</span> <span class="s">&quot;Book Count&quot;</span><span class="p">})</span>
</span><span class='line'>       <span class="p">(</span><span class="nf">incanter/add-derived-column</span> <span class="s">&quot;Pages/Books&quot;</span>
</span><span class='line'>                                  <span class="p">[</span><span class="s">&quot;Page Count&quot;</span> <span class="s">&quot;Book Count&quot;</span><span class="p">]</span>
</span><span class='line'>                                  <span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">p</span> <span class="nv">b</span><span class="p">]</span> <span class="p">(</span><span class="nf">Math/round</span> <span class="p">(</span><span class="nb">double </span><span class="p">(</span><span class="nb">/ </span><span class="nv">p</span> <span class="nv">b</span><span class="p">)))))))</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>stats-by-month</code> returns a dataset which when printed looks like the following table. It joins the data, renames columns, and adds a derived column.</p>

<pre><code>| Month | Book Count | Page Count | Pages/Books |
|-------+------------+------------+-------------|
|     1 |          6 |       1279 |         213 |
|     2 |          2 |       1251 |         626 |
|     3 |          8 |       2449 |         306 |
|     4 |          5 |       1667 |         333 |
|     5 |          6 |       2447 |         408 |
|     6 |          5 |       1609 |         322 |
|     7 |          5 |       1445 |         289 |
|     8 |          5 |       2229 |         446 |
|     9 |          2 |        963 |         482 |
|    10 |          5 |       1202 |         240 |
|    11 |          5 |       2248 |         450 |
|    12 |          7 |       1716 |         245 |
</code></pre>

<p>Great. Now we have a little ascii table. Lets get graphical and make some bar charts.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='clojure'><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">chart-column-by-month</span> <span class="p">[</span><span class="nv">column</span> <span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="k">let </span><span class="p">[</span><span class="nb">select </span><span class="p">(</span><span class="k">fn </span><span class="p">[</span><span class="nv">column</span><span class="p">]</span> <span class="p">(</span><span class="nf">incanter/sel</span> <span class="nv">dataset</span> <span class="ss">:cols</span> <span class="nv">column</span><span class="p">))</span>
</span><span class='line'>        <span class="nv">months</span> <span class="p">(</span><span class="nb">select </span><span class="s">&quot;Month&quot;</span><span class="p">)]</span>
</span><span class='line'>    <span class="p">(</span><span class="nf">charts/bar-chart</span> <span class="nv">months</span> <span class="p">(</span><span class="nb">select </span><span class="nv">column</span><span class="p">)</span>
</span><span class='line'>                      <span class="ss">:y-label</span> <span class="nv">column</span> <span class="ss">:x-label</span> <span class="s">&quot;Month&quot;</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">chart-page-count-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">chart-column-by-month</span> <span class="s">&quot;Page Count&quot;</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">chart-book-count-by-month</span> <span class="p">[</span><span class="nv">dataset</span><span class="p">]</span>
</span><span class='line'>  <span class="p">(</span><span class="nf">chart-column-by-month</span> <span class="s">&quot;Book Count&quot;</span> <span class="nv">dataset</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="kd">defn </span><span class="nv">view-page-count-chart</span> <span class="p">[]</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">-&gt; </span><span class="p">(</span><span class="nf">read-csv</span> <span class="s">&quot;goodreads_export.csv&quot;</span><span class="p">)</span>
</span><span class='line'>      <span class="nv">books-read-in-2013</span>
</span><span class='line'>      <span class="nv">stats-by-month</span>
</span><span class='line'>      <span class="nv">chart-page-count-by-month</span>
</span><span class='line'>      <span class="nv">incanter/view</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>Running the snippet <code>view-page-count-chart</code> produces a pop-up with the
below bar chart. The chart actually surprises me as I fully expected
to have higher page counts during the winter months than the summer
months. This chart and analysis is pretty useless though without
knowing the difficulty of the pages read. For example, last February I
read
<a href="http://www.amazon.com/gp/product/0316920045/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0316920045&amp;linkCode=as2&amp;tag=jakemccrary08-20&amp;linkId=RTXH5NFJLAODUEBP">Infinite Jest</a>.
Knowing that I don&rsquo;t feel like having a low page count in that month
is slacking at all.</p>

<p><img src="/images/page-count-by-month.png" title="Bar chart of total page count by month" alt="Bar chart of total page count by month" /></p>

<h3>2013 Summary</h3>

<p>2013 was a pretty big year of reading. I read more books this past
year than all other years that I have data. I also read some of the
best books I&rsquo;ve ever read. Not only that but I actually created
multiple <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> custom Kindle dictionaries to help improve my (and
others) reading experience.</p>

<p>Summary table <sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>:</p>

<pre><code>|   :shelf | :books | :pages |
|----------+--------+--------|
| non-tech |     51 |  17798 |
|     tech |     10 |   2707 |
|     read |     61 |  20505 |
</code></pre>

<h3>Plans for 2014</h3>

<p>I&rsquo;m planning on reading a similar amount in this upcoming year but
will probably have a bit more non-fiction books. First step towards doing
that is to start classifying my books as non-fiction or fiction. I&rsquo;m
also planning on rereading at least two books that I&rsquo;ve read in the
last few years. This is unusual for me because I don&rsquo;t often reread
books that quickly.</p>

<p>If you have any book recommendations feel free to leave them in the
comments or contact me through twitter or email.</p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>A project on Heroku that takes your to-read list from goodreads and queries the Chicago Public Library to see if books are available. Someday I&rsquo;ll give it some love and make it usable by others.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>I&rsquo;ve also applied to be a goodreads librarian so I can actually fix their data as well.<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>One for <a href="http://jakemccrary.com/blog/2013/07/09/releasing-the-functional-javascript-companion/">Functional JavaScript</a> and another for <a href="http://gum.co/dune-dictionary">Dune</a>. If you want a custom Kindle dictionary made feel free to reach out.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>tech shelf only includes programming books.<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/12/14/book-review-clojure-high-performance-programming/">Book Review: Clojure High Performance Programming</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-12-14T16:39:00-06:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>4:39 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I was recently approached by Packt Publishing asking if I&rsquo;d review
Shantanu Kuma&rsquo;s book
<a href="http://www.packtpub.com/clojure-high-performance-programming/book">Clojure High Performance Programming</a>
. It sounded interesting so I took them up on
their offer for a free copy and read it over two flights.</p>

<p>Unsurprisingly the
<a href="http://www.packtpub.com/clojure-high-performance-programming/book#chapter_1">table of contents</a>
does a good job describing the book. This book doesn&rsquo;t
dive too deep into any one topic but instead gives you a taste of
each.</p>

<p>Overall the book was pretty good. It provides interesting examples of
real world Clojure code that solve specific performance problems. It
talks about host performance, both JVM and hardware, concerns which are
both areas that shouldn&rsquo;t be overlooked. I thought the book was best
when showing examples of well performing code from libraries.</p>

<p>I&rsquo;d recommend this book for developers who aren&rsquo;t past the beginning
stages of writing performant code. It does a good job introducing the
topics you&rsquo;ll want to think about when trying to craft well performing
programs.</p>

<p>It isn&rsquo;t for the developer who has spent years optimizing code for
performance. Those developers are already going to be familiar with
the language and concerns of writing high performance code.</p>

<p>If I could add anything to the book it would be a chapter about
measuring performance in production. If you are writing high
performance programs it has been my experience that you <strong>must</strong>
measure in production. This is easiest to do if you build measuring in
from the very beginning.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/11/11/running-clojure-dot-test-tests-on-file-changes/">Running clojure.test tests on file changes</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-11T20:02:00-06:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>8:02 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>I recently switched <a href="http://outpace.com">companies</a> and find myself working
on a project that uses <code>clojure.test</code>. I haven&rsquo;t worked with
<code>clojure.test</code> since I started using
<a href="https://github.com/jaycfields/expectations">expectations</a> with
<a href="https://github.com/jakemcc/lein-autoexpect">lein-autoexpect</a>. This
combination spoiled me when it comes to testing Clojure code. I
can no longer stand running tests by hand; I&rsquo;m too used to having a
tool run them for me. As a result I tried out some
<code>clojure.test</code> continuous testing tools.</p>

<p>I wasn&rsquo;t satisfied with what I found. Since I wrote <code>lein-autoexpect</code>,
a continous tester for <code>expectations</code>, it was easy for me to fork it
and and create
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a>.
<code>lein-test-refresh</code> solves the issues I ran into with the other
<code>clojure.test</code> tools.</p>

<p>To use <code>lein-test-refresh</code> follow these steps (latest version found in
image at end):</p>

<ol>
<li>Add <code>[com.jakemccrary/lein-test-refresh "0.1.2"]</code> to the <code>:plugins</code>
section in your <code>project.clj</code> or <code>~/.lein/profiles.clj</code> file.</li>
<li>Run <code>lein test-refresh</code> or <code>lein test-refresh :growl</code>.</li>
<li>Enjoy your minimal feedback delays between editing your Clojure
code and seeing if your tests pass.</li>
</ol>


<p><a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a>
watches the source and test directories specified in your
<code>project.clj</code> and reloads code when files changes. After reloading
your code your <code>clojure.test</code> tests are run and the output is printed
to your console. When you pass <code>:growl</code> as a command line argument the
plugin will use growl to notify you of success and failures. This is
one of my favorite features about <code>lein-test-refresh</code> as it allows me
to continuously run my tests without taking up space on my monitors.</p>

<p>I hope you enjoy
<a href="https://github.com/jakemcc/lein-test-refresh">lein-test-refresh</a>. It
has made using <code>clojure.test</code> much more enjoyable.</p>

<p>Latest version from Clojars:
<img src="https://clojars.org/com.jakemccrary/lein-test-refresh/latest-version.svg" alt="Clojars generated dependency vector" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/10/emacs-capture-shell-command-output-in-temporary-buffer/">Emacs: Capture shell command output in temporary buffer</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-10T14:33:00-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>2:33 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>My text editor of choice is Emacs. Its extensibility is a major
contributor to this preference. The ease of adding additional
functionality means you can customize it to your liking. You should
not go overboard and change too much of the default behavior but you
should feel free to add additional features.</p>

<p>I recently found myself often editing a file in emacs and then
switching to a terminal and running a bash script to see how the
output changed. This is part of my work flow for shutting down or
starting new server processes. Since this is something I&rsquo;ll be doing
quite frequently in the future, I wrote some Emacs Lisp to run the
shell script and display the output in a temporary buffer. With this
function in place I no longer have to toggle to a terminal and run a
command.</p>

<p>I&rsquo;m picky and I wanted this output buffer to have the same behavior as
the help buffer. That is, I wanted to be able to close the buffer by
just hitting the letter <code>q</code>. It took me a while to figure out how to
do this so I thought I would share it here in hopes it might benefit others.</p>

<p>First I&rsquo;ll show the code and then I&rsquo;ll explain what it is doing.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">blog-example</span> <span class="p">()</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">with-output-to-temp-buffer</span> <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">shell-command</span> <span class="s">&quot;echo This is an example&quot;</span>
</span><span class='line'>                   <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>                   <span class="s">&quot;*Messages*&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">pop-to-buffer</span> <span class="s">&quot;*blog-example*&quot;</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>


<p>The above snippet defines a function named <code>blog-example</code>. It takes no
arguments and is interactive (as indicated by the second line calling
<code>interactive</code>). This call to <code>interactive</code> makes <code>blog-example</code>
available to be called interactively, meaning you can call it after
triggering <code>M-x</code>. This is probably a simplification of what is
actually does, so if you care the documentation is available
<a href="http://www.gnu.org/software/emacs/manual/html_node/elisp/Using-Interactive.html">here</a>.</p>

<p>After the call to <code>interactive</code> we hit the core of this function, the
call to <code>with-output-to-temp-buffer</code>. This function a buffer name as a first argument
and additional forms. The output of those forms is put into the named
buffer.</p>

<p>The form I&rsquo;m passing to <code>with-output-to-temp-buffer</code> is a call to
<code>shell-command</code>. <code>shell-command</code> will run <code>echo This is an example</code>
synchronously and redirect stdout to <code>*blog-example*</code> and stderr to
<code>*Messages*</code>.</p>

<p>The final line opens the buffer and switches focus to it. Now you can
look at the output and when you are ready to return just hit <code>q</code>.</p>

<p>This is a simplified example but it shows how easy it is to extend
Emacs functionality. Doing something similar to this made a task I do
frequently more pleasant.</p>

<p>My use case is a bit more complicated and involves saving the buffer
I&rsquo;m currently editing and then running a command against the saved
file. Below is some sample code that does something similar.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='cl'><span class='line'><span class="p">(</span><span class="nb">defun</span> <span class="nv">example2</span> <span class="p">()</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">interactive</span><span class="p">)</span>
</span><span class='line'>  <span class="p">(</span><span class="nb">when</span> <span class="p">(</span><span class="nb">and</span> <span class="p">(</span><span class="nv">buffer-modified-p</span><span class="p">)</span>
</span><span class='line'>             <span class="p">(</span><span class="nb">y-or-n-p</span> <span class="p">(</span><span class="nb">format</span> <span class="s">&quot;Save file %s? &quot;</span> <span class="p">(</span><span class="nv">buffer-file-name</span><span class="p">))))</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">save-buffer</span><span class="p">))</span>
</span><span class='line'>  <span class="p">(</span><span class="nv">with-output-to-temp-buffer</span> <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">shell-command</span> <span class="p">(</span><span class="nv">concat</span> <span class="s">&quot;wc -l&quot;</span>
</span><span class='line'>                           <span class="s">&quot; &quot;</span>
</span><span class='line'>                           <span class="p">(</span><span class="nv">expand-file-name</span> <span class="p">(</span><span class="nv">buffer-file-name</span><span class="p">)))</span>
</span><span class='line'>                   <span class="s">&quot;*blog-example*&quot;</span>
</span><span class='line'>                   <span class="s">&quot;*Messages*&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">(</span><span class="nv">pop-to-buffer</span> <span class="s">&quot;*blog-example*&quot;</span><span class="p">)))</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/08/05/releasing-lein-autoexpect-1-dot-0/">Releasing lein-autoexpect 1.0</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-05T19:50:00-05:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>7:50 pm</span></time>
      </p>
    
  </header>


  <div class="entry-content"><p>Put together a new release of
<a href="https://github.com/jakemcc/lein-autoexpect">lein-autoexpect</a> today.
lein-autoexpect is a plugin for <a href="http://leiningen.org/">Leiningen</a>
that monitors your source directories for changes and then reloads
your code and runs your
<a href="https://github.com/jaycfields/expectations">expectations</a>. It reports
test output to the console and optionally sends notifications to
<a href="http://growl.info/">Growl</a> (and Growl like notification tools).</p>

<p>To use lein-autoexpect, add <code>:plugins [[lein-autoexpect "1.0"]]</code> to
your either your project&rsquo;s <code>project.clj</code> or your global
<code>~/.lein/profiles.clj</code>. To use the plugin run <code>lein autoexpect</code>.
This will display the test results to the console. To also have
results reported using Growl run <code>lein autoexpect :growl</code>.</p>

<p>Release 1.0 of lein-autoexpect upgrades its dependency on
<a href="https://github.com/clojure/tools.namespace/">org.clojure/tools.namespace</a>
to version 0.2.4. It also no longer crashes if there isn&rsquo;t a Growl
connection available.</p>

<p>If you haven&rsquo;t tried using expectations and lein-autoexpect I
encourage you to give it a try. Having my tests run automatically made
a huge positive difference on my development experience.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog//9">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog//7">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2020/03/10/more-working-from-home-tips/">More working from home tips</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/02/25/auto-syncing-a-git-repository/">Auto-syncing a git repository</a>
      </li>
    
      <li class="post">
        <a href="/blog/2020/01/11/reading-in-2019/">Reading in 2019</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/10/12/building-an-atreus-keyboard/">Building an Atreus keyboard</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/08/23/building-a-onewheel-stand/">Building a Onewheel stand</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/08/15/switching-my-ergodox-to-qmk-firmware/">Switching my Ergodox to QMK firmware</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/04/30/how-i-use-social-media/">How I use social media</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/03/20/breaking-change-and-more-in-lein-test-refresh-0-dot-24-dot-0/">Breaking change and more in lein-test-refresh 0.24.1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/02/13/testing-asynchronous-javascript-with-jasmine/">Testing asynchronous JavaScript with Jasmine</a>
      </li>
    
      <li class="post">
        <a href="/blog/2019/01/28/how-to-use-leiningen-test-selectors-to-filter-by-test-name/">How to use Leiningen test selectors to filter by test name</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a href="/disclosure-policy">Disclosure Policy</a><br/>
  <a href="//www.iubenda.com/privacy-policy/509351" class="iubenda-nostyle iub-legal-only iubenda-embed" title="Privacy Policy">Privacy Policy</a><br/>
<script type="text/javascript">(function (w,d) {var loader = function () {var s = d.createElement("script"), tag = d.getElementsByTagName("script")[0]; s.src = "//cdn.iubenda.com/iubenda.js"; tag.parentNode.insertBefore(s,tag);}; if(w.addEventListener){w.addEventListener("load", loader, false);}else if(w.attachEvent){w.attachEvent("onload", loader);}else{w.onload = loader;}})(window, document);</script>
  Content licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
</p>


</footer>
  


</body>
</html>
